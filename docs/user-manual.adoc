= Asciidoctor User Manual
Sarah White <https://github.com/graphitefriction[@graphitefriction]>; Dan Allen <https://github.com/mojavelinux[@mojavelinux]>
:description: This guide describes the Asciidoctor attributes, values, and layout options available for producing a customized and polished document.
:keywords: AsciiDoc, Asciidoctor, syntax, reference
:doctype: book
:toc: right
:toclevels: 2
:sectanchors:
:sectlink:
:linkattrs:
:numbered:
:icons: font
:source-highlighter: coderay
:experimental:
:idprefix:
:idseparator: -
:ast: &ast;
:dagger: pass:normal[^&dagger;^]
:y: icon:ok[role="green"]
:n: icon:remove[role="red"]
:c: icon:file-text-alt[role="blue"]
:language: asciidoc
:table-caption!: 
:example-caption!:
:figure-caption!:
:imagesdir: ../images
:includedir: _includes
// Refs
:homepage: http://asciidoctor.org
:gem: http://rubygems.org/gems/asciidoctor
:gh-org: https://github.com/asciidoctor
:tilt: https://github.com/rtomayko/tilt
:jruby: http://jruby.org
:man: http://asciidoctor.org/man/asciidoctor
:rewrite-git: https://github.com/ocpsoft/rewrite/tree/master/transform-markup
:markup-ref: http://en.wikipedia.org/wiki/Lightweight_markup_language
:markdown-ref: http://daringfireball.net/projects/markdown
:fedora-docs: http://docs.fedoraproject.org
:java: http://asciidoctor.org/docs/install-and-use-asciidoctor-java-integration
:templates: https://github.com/asciidoctor/asciidoctor/blob/master/lib/asciidoctor/backends
:tests: https://github.com/asciidoctor/asciidoctor/tree/master/test
:asciidoc-edit-ref: http://asciidoc.org/#_editor_support
:docref: link:/docs
:editing-ref: {docref}/editing-asciidoc-with-live-preview
:asciidoclet-ref: {docref}/install-and-use-asciidoclet/
:docbook-info-ref: http://www.docbook.org/tdg5/en/html/info.html
:richfaces-docinfo: https://github.com/richfaces/richfaces-docs/blob/master/Developer_Guide/src/main/docbook/en-US/Developer_Guide-docinfo.xml
:air-ref: http://en.wikipedia.org/wiki/Air_quotes
:xml-ref: http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references
:unicode-ref: http://en.wikipedia.org/wiki/List_of_Unicode_characters
:fontawesome-ref: http://fortawesome.github.io/Font-Awesome
:factory-ref: http://github.com/asciidoctor/asciidoctor-stylesheet-factory
:http-ref: http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html
:pygments-org: http://pygments.org
:showcase-ref: http://themes.asciidoctor.org/preview/
:docbook5-ref: http://www.docbook.org/tdg5/en/html/ch01.html#introduction-whats-new
:yelp: http://live.gnome.org/Yelp
:publican: http://fedorahosted.org/publican
:a2x: http://asciidoc.org/a2x.1.html
:man-raw: https://raw.github.com/asciidoctor/asciidoctor/master/man/asciidoctor.adoc
:man-backend-git: https://github.com/asciidoctor/asciidoctor-backends/tree/master/erb/manpage
:backend-git: http://github.com/asciidoctor/asciidoctor-backends
:deckjs-org: http://imakewebthings.com/deck.js
:deckjs-zip: https://github.com/imakewebthings/deck.js/zipball/stable
:deckjs-git: https://github.com/imakewebthings/deck.js
:decksplitjs-git: https://github.com/houqp/deck.split.js
:compass-ref: http://compass-style.org
:sass-ref: http://sass-lang.com
:foundation-ref: http://foundation.zurb.com
:get-ruby-ref: http://www.ruby-lang.org/en/downloads
:bundler-ref: http://rubygems.org/gems/bundler
:issue-ref: https://github.com/asciidoctor/asciidoctor/issues
:license: https://github.com/asciidoctor/asciidoctor/blob/master/LICENSE
:mojavelinux: https://github.com/mojavelinux
:erebor: https://github.com/erebor
:lightguard: https://github.com/lightguard
:nickh: http://github.com/nickh
:contributors: https://github.com/asciidoctor/asciidoctor/graphs/contributors
:gitscm-next: https://github.com/github/gitscm-next
:seed-contribution: https://github.com/github/gitscm-next/commits/master/lib/asciidoc.rb

[NOTE]
.This document is under active development and discussion!
====
If you discover errors or omissions in this document, please don't hesitate to submit an issue or open a pull request with a fix.
We also encourage you to ask questions and discuss any aspects of the project on the mailing list or IRC.
New contributors are always welcome!
====

This manual assumes you are using Asciidoctor to produce and render your document.
Asciidoctor implements additional syntax, attributes and functions that the AsciiDoc processor can not handle.
<<appendix1#asciidoctor-vs-asciidoc,Appendix A>> lists which features are available to the Asciidoctor and AsciiDoc processors.

////
== Navigating this document

The first sections define the general concepts and terms used by Asciidoctor
Next, each Asciidoctor feature, its capabilities, and how it can be customized is reviewed.
And when applicable, the feature's attributes and options are summarized in a table at the section's end.
////

= Introduction to Asciidoctor

NOTE: Section Pending

== What is Asciidoctor?

{homepage}[Asciidoctor] is an open source text processor and publishing toolchain for transforming AsciiDoc markup into HTML 5, DocBook 4.5 and 5.0 and other custom formats.
Asciidoctor is written entirely in Ruby, packaged as a RubyGem and published to {gem}[RubyGems.org].
There are also Fedora, Debian and Ubuntu packages available for installing Asciidoctor.
The git repositories for the project are hosted under the {gh-org}[Asciidoctor organization on GitHub] to encourage continued growth.

=== AsciiDoc syntax processing

////
Asciidoctor is a drop-in replacement for the original AsciiDoc python processor.
It reads and parses AsciiDoc markup (from a file or string) and feeds the parsed result to a set of built-in templates to render the document as HTML 5, DocBook 5.0 or 4.5.
////

AsciiDoc belongs to the family of {markup-ref}[lightweight markup languages], the most renowned of which is {markdown-ref}[Markdown].
AsciiDoc stands out from this group because it supports all the structural elements necessary for drafting articles, technical manuals, books, presentations and prose.
In fact, it's capable of meeting even the most advanced publishing requirements and technical semantics.

////
You can override the built-in templates, or produce a custom format, by pointing the processor at a set of template files written in a language supported by {tilt}[Tilt].
////

NOTE: With few exceptions, Asciidoctor is compliant with the original AsciiDoc processor.
Asciidoctor has well over 1,000 tests to ensure compatibility with the AsciiDoc syntax.
We continue to work hard to ensure Asciidoctor continues to serve as a drop-in replacement for AsciiDoc. 

=== Asciidoctor's most notable benefits

////
The primary benefits and supporting features of the application.
////

While Asciidoctor aims to offer full compliance with the AsciiDoc syntax, it's more than just a clone.

.Built-in and custom templates
Asciidoctor uses a set of built-in ERB templates to generate HTML 5 and DocBook output that is structurally equivalent to what AsciiDoc produces. 
Any of these templates can be replaced by a custom template written in any template language available in the Ruby ecosystem. 
Custom template rendering is handled by the {tilt}[Tilt] template abstraction library.
Tilt is one of the most popular gems in the Ruby ecosystem.

.Parser and object model
Leveraging the Ruby stack isn't the only benefit of Asciidoctor. 
Unlike the AsciiDoc Python implementation, Asciidoctor parses and renders the source document in discrete steps. 
This makes rendering the document optional and gives Ruby programs the opportunity to extract, add or replace information in the document by interacting with the document object model Asciidoctor assembles. 
Developers can use the full power of the Ruby programming language to play with the content in the document.

.Performance and security
No coverage of Asciidoctor would be complete without mention of its 'speed'. 
Despite not being an original goal of the project, Asciidoctor has proven startlingly fast. 
It loads, parses and renders documents *25 times as fast* as the Python implementation. 
That's good news for developer productivity and good news for GitHub or any server-side application that needs to render AsciiDoc markup. 
Asciidoctor also offers several levels of security, further justifying its suitability for server-side deployments.

.Beyond Ruby
Asciidoctor's usage is not limited to the Ruby community. 
Thanks to {jruby}[JRuby], a port of Ruby to the JVM, Asciidoctor can be used inside Java applications as well.
Plugins are available for {gh-org}/asciidoctor-maven-plugin[Apache Maven],  {gh-org}/asciidoctor-gradle-plugin[Gradle], and {rewrite-git}[Rewrite].
These plugins are based on the {gh-org}/asciidoctor-java-integration[Java integration library] for Asciidoctor. 

Asciidoctor also ships with a command line interface (CLI). 
The Asciidoctor CLI, {man}[+asciidoctor+], is a drop-in replacement for the +asciidoc.py+ script from the AsciiDoc Python distribution.

////

AsciiDoc is about being able to focus on expressing your ideas, writing with ease and passing on knowledge without the distraction of complex applications or angle brackets.
In other words, it's about discovering _writing zen_.

AsciiDoc works because:

- It's readable
- It's concise
- It's comprehensive
- It's extensible
- It produces beautiful output (HTML, DocBook, PDF, ePub and more)

AsciiDoc is easy to write and its easy to read (in raw form).
It's also easy to proof and edit.
After all, it's plain text, just like that familiar e-mail.

The AsciiDoc syntax is intuitive because it recognizes time-tested, plain text conventions for marking up or structuring the text.
The punctuation was carefully chosen to look like what it means.
A user unfamiliar with AsciiDoc can figure out the structure and semantics (i.e., what you mean) just by looking at it.
Best of all, *it only requires a text editor to read or write*.

AsciiDoc allows you to focus on the actual writing and only worry about tweaking the output when you are ready to render the document.
The plain-text of an AsciiDoc document is easily converted into a variety of output formats, beautifully formatted, without having to rewrite the content.

Copy text from an e-mail into a document and see how quickly you can turn it into documentation.
Almost immediately, you'll find your writing zen and enjoy the rewarding experience of sharing knowledge.

Live or die by documentation? Live.
////

=== Compared to AsciiDoc

NOTE: Section Pending

////
.What is AsciiDoc?

AsciiDoc is two things:

. A mature{empty}footnote:[AsciiDoc is over 10 years old. It was first introduced in 2002.], plain-text format for authoring notes, articles, documentation, books, ebooks, web pages, slide decks, blog posts, man pages and more.
. A text processor and toolchain for translating AsciiDoc documents into various formats (called _backends_), including HTML, DocBook, PDF and ePub{empty}footnote:[There are two implementations of the AsciiDoc processor. The original processor, named AsciiDoc, is written in Python. A more modern implementation, named Asciidoctor, is written in Ruby.].

AsciiDoc belongs to the family of {markup-ref}[lightweight markup languages], the most renowned of which is {markdown-ref}[Markdown].
AsciiDoc stands out from this group because it supports all the structural elements necessary for drafting articles, technical manuals, books, presentations and prose.
In fact, it's capable of meeting even the most advanced publishing requirements and technical semantics.


Serving as testament of this fact, many O'Reilly authors, including https://github.com/matthewmccullough[Matthew McCullough], https://github.com/tlberglund[Tim Berglund], https://github.com/oreillymedia/etudes-for-erlang[Simon St.Laurent] and http://www.apeth.net/matt/iosbooktoolchain.html[Matt Neuburg], have used AsciiDoc to write their books for that iconic technical library.

From the very beginning, AsciiDoc was designed to be a shorthand replacement for http://www.docbook.org/whatis[DocBook], one of the formats AsciiDoc can generate.
AsciiDoc can also produce beautiful HTML 5, PDFs, eBooks, man pages and even slide decks.
It has you covered from first draft to publishing.
////

=== Compared to MarkDown

NOTE: Section Pending

= Quick Starts

NOTE: Section Pending

== Installation Quick Start

NOTE: Section Pending

== Usage Quick Start

NOTE: Section Pending

=== Using the Command Line Interface

include::{includedir}/command-line-usage.adoc[]

=== Using the Ruby API

include::{includedir}/api-intro.adoc[]

include::{includedir}/load-render-api.adoc[]

You can also use the API to <<render-strings,render strings>> and <<provide-custom-templates,load custom templates>>.

== Syntax Quick Start

NOTE: Section Pending

== Custom Output Quick Start

NOTE: Section Pending

= Getting Started

NOTE: Section Pending

== System Requirements

include::{includedir}/install-upgrade-asciidoctor.adoc[tags=systemreq]

== Installing the Asciidoctor Ruby Gem

include::{includedir}/install-upgrade-asciidoctor.adoc[tags=basicgem]

.Two API Flavors
****
In addition to the CLI, Asciidoctor provides a <<api,Ruby API>>.
The API is intended for integration with other software projects and is suitable for server-side applications, such as Rails, Sinatra and GitHub.

Asciidoctor also has a Java API that mirrors the Ruby API.
The Java API calls through to the Ruby API using an embedded JRuby runtime.
See the {java}[Asciidoctor Java integration project] for more information.
****

=== Install with Bundler

include::{includedir}/install-upgrade-asciidoctor.adoc[tags=bundler]

=== Install with +yum+
 
include::{includedir}/install-upgrade-asciidoctor.adoc[tags=yum]

=== Install with +apt-get+
 
include::{includedir}/install-upgrade-asciidoctor.adoc[tags=aptget]

== Upgrading the Asciidoctor Ruby Gem

include::{includedir}/install-upgrade-asciidoctor.adoc[tags=upgrade]

== Extensions and Integrations

NOTE: Section Pending

= Terms and Concepts

All of the content in an Asciidoctor document, including lines of text, predefined styles, and processing commands, is classified as either a block or an inline element.
Within each of these elements are an array of styles, options, and functions that can be applied to your content.

This section will provide you with an overview of what each of these elements and sub-elements are and the basic syntax and rules for using them.

== Elements

One or more lines of text in a document are defined as a block element.
Block elements can be nested within block elements.

A document can include the following block elements:

* Header
* Title
* Author Info
* First Name
* Middle Name
* Last Name
* Email Address
* Revision Info
* Revision Number
* Revision Date
* Revision Remark
* Attribute Entry
* Preamble
* Section
* Title
* Section Body
* BlockId
* Block Title
* Block Macro
* Block
* Paragraph
* Delimited Block
* Table
* List
* Bulleted List
* Numbered List
* Labeled List
* Callout List
* List Entry
* List Label
* List Item
* Item Text
* List Paragraph
* List Continuation

An inline element preforms an operation on a subset of the content within a block element.

Inline elements include:

* Quotes
* Replacements
* Special characters
* Special words
* Attribute references
* Inline macros

== Macros

NOTE: Section pending

== Attributes

Attributes are one of the features that sets Asciidoctor apart from other lightweight markup languages.
Attributes activate features and store predefined styles, options, and replacement content.

In Asciidoctor, attributes are classified as:

* Intrinsic Attributes
* Attribute Entrys
* Attribute Lists
* BlockId Elements
* Macros
* API and Command Line Attributes

=== Attribute assignment precedence

By default, the attribute assignment precedence, from highest to lowest, is as follows:

- Attribute passed to the API or CLI
- Attribute defined in the document
- Intrinsic attribute value (default values)

Let's use the +doctype+ attribute to show how precedence works.

The intrinsic value for the +doctype+ attribute is +article+. 
Therefore, if +doctype+ is not set and assigned a value in the document, API or CLI it will be assigned the +article+ value (i.e. its default value).
However, if +doctype+ is set in the document and assigned a new value, such as +book+, the +book+ value will override the intrinsic value.
Finally, a value assigned to +doctype+ via the API or CLI, will overrule the value in the document.

You can adjust the precedence of attribute values passed to the API or CLI.
By adding an +@+ symbol to the end of an attribute value passed to the API or CLI, it makes that assignment have a lower precedence than an assignment in the document. 

Let's add that to the precedence list defined earlier.

- Attribute passed to the API or CLI that does not end in +@+
- Attribute defined in the document
- Attribute passed to the API or CLI that ends in +@+
- Intrinsic attribute value (default values)

=== Using attributes: set, assign, and reference

Before you can use an attribute in your document, you must *set* it.
Sometimes, setting an attribute is also referred to as *toggling on*.
To set an attribute, you must add its name to the document.

Once set, many attributes can be assigned a value.
Values are the substitute text, content type, or operation that will replace any references to the attribute that the processor finds in the text.

An attribute reference is an inline element that calls the attribute entry with the same name.
An attribute's reference is its name enclosed in curly brackets.
The reference is replaced with the attribute's value when Asciidoctor processes the document.

A number of attributes and values are automatically used when the Asciidoctor processor renders a document.
These attributes are called intrinsic attributes.
For example, you do not need to set the +normal+ attribute on a basic paragraph because it is set by an intrinsic attribute.
But when you want a paragraph to have a different style, such as +TIP+, you set the +TIP+ attribute on a paragraph and +TIP+ will override the intrinsic +normal+ attribute.
Intrinsic attributes can be overridden or unset from the command line or within the document.

Attributes can be unset with the bang symbol (+!+).
The +!+ can be placed before or after the attribute's name.

For example, both:

 :attribute_name!:

and

 :!attribute_name:

mean "do not number" and unset the +numbered+ attribute.

The following sections will show you how to use attributes on your whole document, individual blocks, and inline elements.

////

NOTE: To learn about command line attributes and how to use them, proceed to <<processing-a-document>>.

Attributes can be set via the command line, in the document header, and on individual block and inline elements.

Attribute entries are most commonly set in the document header, though some can also be applied to individual elements.
Attribute lists are set on individual block and inline elements.

Attributes can also be assigned values.
Values can be 
Attributes are set and can be assigned values.
To set an attribute
Most often, attributes are defined in the document header, but they can also be defined inline or on the command line.
////

=== Built-in data attributes

Asciidoctor includes numerous intrinsic attributes that are assigned values when the document is rendered.
The values of these built-in data attributes are derived from how the document is processed and when and where is it processed.
These attributes can be referenced anywhere in the document.

.Built-in data attributes
[cols="1m,3,3"]
|===
|Attribute |Description |Notes

|asciidoctor
|
|_blank_

|asciidoctor-version
|Version of the processor
|

|docdate
|Last modified date
|

|docdatetime
|Last modified date and time
|

|docdir
|Name of document directory
|

|docfile
|Name of document file
|

|doctime
|Last modified time
|

|localdate
|Local date when rendered
|

|localdatetime
|Local date and time when rendered
|

|localtime
|Local time when rendered
|

|===

=== Setting attributes on a document

When an attribute is set in the header of a document, it is called an attribute entry.

.Anatomy of an attribute entry
----
:attribute name: value
----

An attribute entry consists of the attribute's name and its value.
The attribute's name is preceded and followed by a colon.
After the second colon, there is at least one space and then the value.
The value is optional.

Once set, an attribute entry and its value are available for use throughout your entire document.
Attribute entries are used to toggle settings on and off or to set configuration variables that control the output generated by the AsciiDoc processor.
For example, to include a table of contents in your document, you can turn on (i.e., set) the +toc+ attribute entry.

[source]
----
:toc:
----

When the value field following an attribute is left empty, as it is in the example above, the default value will be assigned.
The default value for +toc+ is +auto+; therefore, the table of contents will be placed on below the document's title when it is rendered.
If you wanted the table of contents to be placed on the right side of the document, you must assign the attribute a new value.

[source]
----
:toc: right
----

The +right+ value will override the default value.
The value assigned to an attribute in the document header will replace the intrinsic value.

Attribute entries are also used to store URLs.
Here's an example:

[source]
----
:fedpkg: https://apps.fedoraproject.org/packages/asciidoc
----

Now you can refer to this attribute entry anywhere in the document (where attribute substitution is performed) by surrounding its name in curly braces:
Here's the attribute in use:

====
Information about the AsciiDoc package in Fedora is found at {fedpkg}.
====

You can also set the base path to images (default: _empty_), icons (default: +./images/icons+), stylesheets (default: +./stylesheets+) and JavaScript files (default: +./javascripts+):

[source]
----
:imagesdir: ./images
:iconsdir: ./icons
:stylesdir: ./styles
:scriptsdir: ./js
----

When you find yourself typing the same text repeatedly, or text that often needs to be updated, consider assigning it to a document attribute and use that instead.

Attribute entries have the following characteristics:

* can be assigned to a document via the CLI or in the document's header and body
* have default values
** their default values are set when the user leaves the value field empty
* some have alternate values
* they can be unset (turned off) with a +!+
* they override config files, intrinsic attributes
* they do *not* override attributes issued from the command line
** a number of entry attributes can also be used on the command line

=== Setting attributes on an element

An attribute list can apply to blocks, inline quotes text, and macros.
The attributes and their values contained in the list will take precedence over attribute entries.

.Anatomy of an attribute list
 [positional attribute,positional attribute,named attribute="value"]
 
Attribute lists:

. apply to blocks as well as macros and inline quoted text
. can contain positional and named attributes
. take precedence over global attributes

==== Positional attribute

in an attribute list

not named

the first positional attribute in the list on inline quoted text is referred to as the role attribute

the first positional attribute in the list on blocks and macros is known as the style attribute

==== Named attribute

Named attributes are assigned a value with an +=+ in an attribute list.

To undefine a named attribute, set the value to +none+.

==== Style

The style attribute is the first positional attribute in an attribute list. 
It specifies a predefined set of characteristics that should apply to a block element or macro.

For example, a paragraph block can be assigned one of the following built-in style attributes:

* normal (default, so does not need to be set)
* literal
* verse
* quote
* listing
* TIP
* NOTE
* IMPORTANT
* WARNING
* CAUTION
* abstract
* partintro
* comment
* example
* sidebar
* source

==== Id

The id attribute specifies a unique name for an element.
That name can only be used once in a document.

An id has two purposes:

. to provide an internal link or cross reference anchor for the element
. to reference a style or script used by the output processor

////
BlockId

NOTE: Section pending
////

===== Block assignment

In an attribute list, there are two ways to assign an id attribute to a block element.

. Prefixing the name with a hash (+#+).
. Specifying the name with +id="name"+.

[source]
----
[#goals]
* Goal 1
* Goal 2
----

Let's say you want to create a blockquote from an open block and assign it an id and role.
You prepend the style +quote+ to the +#+ (+id+) in the first attribute position, as this example shows:

[source]
----
[quote#think, Donald Trump]
____
As long as you're going to be thinking anyway, think big.
____
----

TIP: The order of id and role values in the shorthand syntax does not matter.

===== Inline assignment

The id (+#+) shorthand can be used on inline quoted text.

.Quoted text block with +id+ assignment using Asciidoctor shorthand
----
[#free_the_world]*free the world*
----

////
.Quoted text block with +id+ assignment using traditional AsciiDoc syntax
----
[[free_the_world]]*free the world*
----
////

==== Role

NOTE: Section introduction pending

An element can be assigned numerous roles.

===== Block assignment

In an attribute list, there are two ways to assign a role attribute to a block element.

. Prefixing the name with a dot (+.+).
. Specifying the name with +role="name"+.

[source]
----
[.summary]
* Review 1
* Review 2
----

[source]
----
[role="summary"]
* Review 1
* Review 2
----

To specify multiple roles using the shorthand syntax, separate them by dots.

[source]
----
[.summary.incremental]
* Review 1
* Review 2
----

[source]
----
[role="summary,incremental"]
* Review 1
* Review 2
----

===== Inline assignment

The role (+.+) shorthand can be used on inline quoted text.

.Quoted text with +role+ assignments using traditional AsciiDoc syntax
----
[big goal]*free the world*
----

.Quoted text with +role+ assignments using Asciidoctor shorthand
----
[.big.goal]*free the world*
----

* The attribute list preceding formatted text can be escaped using a backslash (e.g., +\[role]*bold*+). In this case, the text will still be formatted, but the attribute list will unescaped and output verbatim.

.Role-playing for text enclosed in backticks
To align with other formatted (i.e., quoted) text in AsciiDoc, roles can now be assigned to text enclosed in backticks.

Given:

```
[rolename]`escaped monospace text`
```

the following HTML is produced:

```html
<code class="rolename">escaped monospace text</code>
```

Using the new shorthand notation in Asciidoctor 0.1.4, an id (i.e., anchor) can also be specified:

```
[#idname.rolename]`escaped monospace text`
```

which produces:

```html
<a id="idname"></a><code class="rolename">escaped monospace text</code> 
```
 
Keep in mind that text enclosed is not subject to other inline substitutions, but rather passed through as is.

==== Options

The options attribute is a versatile named attribute that can contain a comma separated list of values.

It can also be defined globally with an attribute entry.

===== Block assignment

In an attribute list, there are three ways to assign an options attribute to a block element.

. Prefixing the value with a percent sign (+%+).
. Specifying the value with +opts="name"+
. Specifying the value with +options="name"+.

Consider a table block with the three option values +header+, +footer+, and +autowidth+. 

Here's how the options are assigned to the table using the shorthand notation (+%+).

.Shorthand Asciidoctor syntax
----
[%header%footer%autowidth]
|===
| Cell A | Cell B
|===
----

Here's how the options are assigned to the table using +options=+.

.Traditional AsciiDoc syntax
----
[options="header,footer,autowidth"]
|===
| Cell A | Cell B
|===
----

Let's consider the options when combined with other attributes. 

.Shorthand Asciidoctor block syntax
----
[horizontal.properties%step]
property 1:: does stuff
property 2:: does different stuff
----

.Traditional AsciiDoc block syntax
----
[horizontal, role="properties", options="step"]
property 1:: does stuff
property 2:: does different stuff
----

=== Assigning document variables inline

Document variables can be assigned using the following syntax:

 {set:<attrname>[!][:<value>]}

For example:

[source,asciidoc]
{set:sourcedir:src/main/java}

It's effectively the same as:

 :sourcedir: src/main/java

This is important for being able to assign document attributes in places where attribute entry lines are not normally processed, such as in a table cell.

////
An example of where this might be used is documented in the {doc-variable-ref}[how to set the background color of a table cell] tip.
////

=== Attribute conventions

NOTE: Section Pending

==== Catch a missing or undefined attribute

By default, the original AsciiDoc processor drops the entire line if it contains a reference to a missing attribute (e.g., +\{bogus}+).
This "feature" was added for use in templates written for the original processor, which also used the AsciiDoc syntax.

This behavior is not needed in Asciidoctor since templates are written in a dedicated template language (e.g., ERB, Haml, Slim, etc).
More critically, the behavior is frustrating for the author, editor or reader.
To them, it's not immediately apparent when a line goes missing.
Discovering its absence often requires a full (and tedious) read-through of the document or section.

Asciidoctor 0.1.4 introduced two attributes to alleviate this inconvenience: +attribute-missing+ and +attribute-undefined+.

.Missing attribute
The attribute +attribute-missing+ controls how missing references are handled.
By default, missing references are left intact so it's clear to the author when one hasn't been satisfied since, likely, the intent is for it to be replaced.

This attribute has three possible values:

+skip+:: leave the reference in place (default setting)
+drop+:: drop the reference, but not the line
+drop-line+:: drop the line on which the reference occurs (compliant behavior)

Consider the following line of AsciiDoc:

```
Hello, {name}!
```

Here's how the line is handled in each case, assuming the +name+ attribute is not defined:

[horizontal]
+skip+:: Hello, \{name}!
+drop+:: Hello, !
+drop-line+:: {empty}

.Undefined attribute
The attribute +attribute-undefined+ controls how expressions that undefine an attribute are handled.
By default, the line is dropped since the expression is a statement, not content.

This attribute has two possible values:

+drop+:: substitute the expression with an empty string after processing it
+drop-line+:: drop the line that contains this expression (default setting and compliant behavior)

The option +skip+ doesn't make sense here since the statement is not intended to produce content.

Consider the following declaration:

```
{set:name!}
```

Depending on whether +attribute-undefined+ is +drop+ or +drop-line+, either the statement or the line that contains it will be discarded.
It's reasonable to stick with the compliant behavior, +drop-line+, in this case.

TIP: We recommend putting any statement that undefines an attribute on a line by itself.

= Building a Document

NOTE: Introduction Pending

== Text Editor

include::{includedir}/text-editor.adoc[]

== Document Types

Article:: Default doctype
In DocBook, includes the appendix, abstract, bibliography, glossary, and index sections

Book:: The same as articles with the additional ability to use a top level title as part titles, includes the appendix, dedication, preface, bibliography, glossary, index, and colophon

Inline:: There may be cases when you only want to apply inline AsciiDoc formatting to input text without wrapping it in a block element. 
For example, in the {asciidoclet-ref}[Asciidoclet project] (AsciiDoc in Javadoc), only the inline formatting is needed for the text in Javadoc tags.

The rules for the inline doctype are as follows:

* Only a single paragraph is read from the AsciiDoc source
* Inline formatting is applied
* The output is not wrapped in the normal paragraph tags

Given the following input:

[source]
----
http://asciidoc.org[AsciiDoc] is a _lightweight_ markup language...
----

Processing it with the options +doctype=inline+ and +backend=html5+ produces:

[source,html]
----
<a href="http://asciidoc.org">AsciiDoc</a> is a <em>lightweight</em> markup language&#8230;
----

The Asciidoctor processor is now able to cover the full range of output, from unstructured (inline) text to a full, standalone document!

CAUTION: Asciidoctor only.

Manpage:: Special title and section naming conventions used to generate roff format UNIX manual pages.
Corresponds to the DocBook refentry document type

== Basic Document Anatomy

NOTE: Section pending

[[doc-header]]
== Header

The document header contains title, author and revision information as well as any document-wide attributes set and defined by the user.
The header is _not required_ when the +doctype+ is +article+ or +book+.
If absent, Asciidoctor will render the content that is present.

WARNING: A header must be present when the document type is +manpage+.
The requirements for a manpage are described in the <<manpage>> section.

When the header is present, it must start with a document title.
The title can be immediately followed by two optional lines of text defining author and revision information.
Finally, any document-wide settings are configured using attribute entries.
The header can not contain any blank lines, but it can contain comments.

The header is processed when rendering a full document.
This means that the header of a document called via an <<include-directive,+include+ directive>> will be processed and rendered.
When you do not want the header of a document to be rendered, set the +noheader+ or +no-header-footer+ attribute in the document's header or the CLI.

.Front matter
****
Many static site generators, such as Jekyll and Middleman, rely on front matter added to the top of the document to determine how to render the content.
Asciidoctor has a number of attributes available to correctly handle front matter.
See the <<static-website-generators>> section to learn how Asciidoctor integrates with static website generators.
****

Now let's look at the document title in detail.

=== Document title

A document title must be placed on the first line of the document.
It is preceded by one equal sign followed by at least one space (++= ++), and then the text of the title.

Here's an example of a document title followed by an abbreviated paragraph.

.Document with a title
[source]
----
include::{includedir}/sect0-title.adoc[]
----

.Result: Rendered document title
====
image::sect0-title.png[Title of document]
====

When the doctype is set to +article+ or +manpage+, a document can have only one document title.
The +book+ document type can have multiple section level 0 titles, which are translated into parts.

A document's title is assigned to the built-in +doctitle+ attribute.
Its value is identical to the value returned by +Document#doctitle+ and +sect0+.
The +doctitle+ attribute can be referenced anywhere in a document and will display the document's title when rendered. 

.Referencing the +doctitle+ attribute
[source]
----
include::{includedir}/doctitle.adoc[]
----

.Result: +doctitle+ output 
====
image::doctitle.png[Doctitle attribute]
====

You can control whether or not the title is displayed when the document is rendered with the attributes +notitle+ and +showtitle+.
If you don't want the title to be rendered, set the +notitle+ attribute in the header or CLI.
On the other hand, the title is not displayed when a document's header and footer are disabled.
In this case, set the +showtitle+ attribute in order to render the title.

Let's see how to add additional information to the header, including an author and her email address.

=== Author and email

The author a document is listed on the line beneath the document's title.
An optional email address can follow an author's name.

Let's add an author and her email address to the document below.

[source]
----
include::{includedir}/author-email.adoc[]
----

.Result: Rendered author and email information displayed on the byline and referenced in the document's body
====
image::author-email.png[Author and email attributes]
====

As you can see in the example above, Asciidoctor uses the author's name and email to assign values to a number of built-in attributes that can be used throughout the document's body.
These attributes include:

[horizontal]
+author+::
The author's full name, which includes all of the characters or words prior to a semicolon (+;+), angle bracket (+<+) or the end of the line.

+firstname+::
The first word in the +author+ attribute.

+lastname+:: 
The last word in the +author+ attribute.

+middlename+::
If a +firstname+ and +lastname+ are present, any remaining words or characters found between these attributes are assigned to the +middlename+ attribute.

+authorinitials+::
The first character of the +firstname+, +middlename+, and +lastname+ attributes.

+email+::
An email address, delimited by angle brackets (+<>+).

If the author's first, middle or last name consists of more than one word, use an underscore (+_+) between the words.
The author of the following document has two middle names.

[source]
----
include::{includedir}/author-two-middle.adoc[]
----

.Result: Rendered author information when author has two middle names 
====
image::author-two-middle.png[Compound author name attributes]
====

Alternatively, the +author+ and +email+ attributes can be set explicitly in the header.

[source]
----
include::{includedir}/author-email-long.adoc[]
----

.Result: Rendered author information when author and email attributes are explicitly set
====
image::author-email-long.png[Author and email attributes]
====

The +html5+ and +docbook+ backends can render documents with multiple authors.
Multiple authors and their emails are separated by semicolons (+;+) when they're listed on the same line.

[source]
----
include::{includedir}/multi-author.adoc[]
----
<1> To reference the additional authors in the document body, the author attributes are appended with an underscore (+_+) followed by the position of the author in the author information list (i.e. Lazarus het Draeke is the second author in the list so his author attributes are appended with a 2).

.Result: Rendered author information when document has multiple authors
====
image::multi-author.png[Multiple author and email attributes]
====

////
If you want to enter multiple authors and their emails as attribute entries, the attribute names are as follows:

[source]
----
include::{includedir}/multi-author-email-long.adoc[]
----

.Result 
====
image::multi-author-email-long.png[Multiple author and email attributes]
====

Where does +authored+ (empty string '' if {author} or {email} defined) fit in?
////

=== Revision number, date, and remark

A document's revision information contains three optional attributes.

[horizontal]
+revnumber+::
The document's version number which must contain at least one numeric character.
Any letters or symbols preceding the numeric character will not be rendered.

+revdate+::
The date the document version was completed.
When the +revnumber+ or +revremark+ attributes are set, but +revdate+ is not, then +revdate+ will be assigned the +docdate+ value.

+revremark+::
Information about this version of the document.

The revision information is listed on the third line of the header, beneath the author information line.

[source]
----
include::{includedir}/rev.adoc[]
----
<1> +revnumber+ and +revdate+ must be separated by a comma (+,+).
<2> +revdate+ can contain words, letters, numbers, and symbols.
<3> The +revremark+ attribute must be preceded by a colon (+:+), regardless of whether +revnumber+ or +revdate+ are set.

.Result: Rendered revision information displayed on the byline and referenced in the document's body
====
image::rev.png[Revision attributes]
====

When rendered, the +revnumber+ in the byline is preceded by the word _Version_; however, when referenced in the body of the document, only the numerical value is displayed.
The +version-label+ attribute controls the version number label in the byline.
The revision information attributes can also be explicitly set in the header.

[source]
----
include::{includedir}/rev-long.adoc[]
----
<1> When explicitly set, any characters preceding the version number are *not* dropped.
<2> The +revremark+ can contain attribute references.
<3> The +version-label+ attribute is unset so that the word _Version_ does not precede the +revnumber+ in the byline.

.Result: Rendered revision information when revision attributes are explicitly set
====
image::rev-long.png[Explicitly set revision attributes]
====

In the rendered document, notice that the _V_ preceding the +revnumber+ is capitalized in the byline but not when the attribute is referenced in the body of the document.

NOTE: Revision extraction information and an extraction example are pending.

=== Metadata

Document metadata, such as a description of the document, keywords, and an alternative title, can be assigned to attributes in the header.
When rendered to HTML, the values of these attributes will correspond to tags contained in the +<head>+ section of an HTML document.

==== Description

You can include a description of the document using the +description+ attribute.

[source]
----
include::{includedir}/desc.adoc[lines=1..7]
----
<1> If the document's description is long, you can break the attribute's value across several lines by ending the lines in a +{plus}+ that is preceded by a space.

When rendered to HTML, the document description value is assigned to the HTML +<meta>+ tag.

.HTML output
====
include::{includedir}/desc-output.adoc[]
====

==== Keywords

The +keywords+ attribute contains a list of comma separated values that are assigned to the HTML +<meta>+ tag.

[source]
----
include::{includedir}/keywords.adoc[]
----

.HTML output 
====
include::{includedir}/keywords-output.adoc[]
====

==== Alternate title

By default, the document title is used as the HTML +<title>+ tag value.
However, you can set the +title+ attribute in the document's header to override this behavior.

==== Custom metadata, styles and functions

You can add content, such as custom metadata, stylesheet, and script information, to the header of a rendered document with document information (+docinfo+) files. 
The <<docinfo-file>> section details what these files can contain and how to use them.

=== Header summary

.Header attributes and values
[cols="1m,1,2,2,1"]
|===
|Attribute |Values |Description |Notes |Backends

|author
|
|Author's full name
|
|all

|authorinitials
|
|First character of each word in the +author+ attribute
|
|all

d|+description+, +desc+
|
|Text describing the document
|
|html

d|+docinfo+, +docinfo1+, +docinfo2+
|
|Adds content from a docinfo file to header
|
|html, docbook

|doctitle
|Text entered by user
|Title of document
|Identical to the value returned by +Document#doctitle+
|all

|email
|
|Email address
|
|all

|firstname
|
|First word of +author+ attribute
|
|all

|lastname
|
|Last word of +author+ attribute
|
|all

|middlename
|
|Middle word of +author+ attribute
|
|all

d|+no-header-footer+, +s+
|
|Suppresses the rendering of the header and footer
|
|all

|noheader
|
|Suppresses the rendering of the header
|
|all

|notitle
|
|Toggles the display of a document's title 
|
|all

|revdate
|
|Date of document version
|
|all

|revnumber
|
|Version number of the document
|
|all

|revremark
|
|Version comments
|
|all

|showtitle
|
|Toggles the display of an embedded document's title 
|
|all

|title
|
|Alternative title of the document
|
|html

|version-label
|+Version+, User defined
|The label preceding the +revnumber+ in a render document's byline
|
|html

|===



[[doc-preamble]]
== Preamble

Content between the document header and the first section level title is called the preamble.
A preamble is optional.

.Preamble
----
include::{includedir}/preamble.adoc[]
----

When using the default Asciidoctor stylesheet, the <<lead-paragraph,+lead+ attribute>> is applied to the first paragraph of the preamble.

.Result: Rendered preamble
====
image::preamble.png[Preamble with lead attribute applied]
====

== Sections

Sections partition the document into a content hierarchy.
In Asciidoctor, sections are defined using section titles.

A section title uses the same syntax as a document title (+=+), except the line may begin with two to six equal signs instead of just a single equal sign.
The number of equal signs represents the nesting level (using a 0-based index).

Here are the section levels permitted in a document shown below the document title:

.Section titles available in an article doctype
[source, asciidoc]
----
= Document Title (Level 0)

== Level 1 Section

=== Level 2 Section

==== Level 3 Section

===== Level 4 Section

====== Level 5 Section

== Another Level 1 Section
----

TIP: In addition to the equals marker used for defining single-line section titles, Asciidoctor recognizes the hash symbol (+#+) from Markdown.
That means the outline of a Markdown document will render just fine as an AsciiDoc document.

Section levels cannot be chosen arbitrarily.
There are two rules you must follow:

. A document can only have multiple level 0 sections if the +doctype+ is set to +book+.
. Section levels cannot be skipped when nesting sections

For example, the following syntax is illegal:

[source, asciidoc]
----
= Document Title

= Illegal Level 0 Section (violates rule #1)

== First Section

==== Illegal Nested Section (violates rule #2)
----

Content above the first section (after the document title) is part of the preamble.
Once the first section is reached, content is associated with the section that proceeds it:

[source]
----
== First Section

Content of first section

=== Nested Section

Content of nested section

== Second Section

Content of second section
----

=== Titles as headings

When the document is rendered as HTML 5 (using the built-in +html5+ backend), each section title becomes a heading element where the heading level matches the number of equal signs.
For example, a level 1 section (+==+) maps to an +<h2>+ element.

=== Title id and prefix

Section ids are generated from the section title and prefixed with an underscore (+_+) by default. 
You can change the prefix using the +idprefix+ attribute.

 :idprefix: -

If you want to remove the prefix, assign it to an empty value:

 :idprefix:

To disable the auto-generation of section IDs, unset the +sectids+ attribute:

 :sectids!:

=== Links

To turn section titles into links, enable the +sectlink+ attribute. 
The default Asciidoctor stylesheet displays linked section titles with the same color and styles as unlinked section titles.

=== Anchors

When the +sectanchors+ attribute is enabled on a document, an anchor (empty link) is added before the section title. 
The default Asciidoctor stylesheet renders the anchor as a section entity (+&sect;+) that floats to the left of the section title.

=== Numbering

Asciidoctor allows section numbering to be toggled on and off throughout a document.
You can enable section numbers using the +numbered+ attribute.

 :numbered:

You can also use this attribute entry above any section title in the document to toggle the auto-numbering setting.
When you want to turn off the numbering, add an exclamation point to the end of the attribute name:

[source]
----
:numbered!:

== Unnumbered Section
----

For regions of the document where section numbering is turned off, the section numbering will not be incremented.

Given:

[source]
----
= Document Title

:numbered!:

== Colophon Section

== Another Colophon Section

== Last Colophon Section

:numbered:

== Section One

== Section Two

== Section Three
----

The sections will be numbered as follows:

[source]
----
Colophon Section

Another Colophon Section

Last Colophon Section

1. Section One

2. Section Two

3. Section Three
----

Asciidoctor will always curtail incrementing the section number in regions of the document where section numbers are off.

If +numbered+ is set on the command line (or API), that overrides the value set in the document header, but it does not prevent the document from toggling the value for regions of the document.

If +numbered!+ is set on the command line (or API), then the numbers are disabled regardless of toggling within the document.

=== Discrete or floating section titles

The +discrete+ attribute can be applied to any section titles that start with two to six equal signs (+==+).
A discrete title is styled like a section title but is not part of the content hierarchy (i.e., it ignores section nesting rules). 
Nor will it be included in the ToC.

[source]
----
[discrete] <1>
== Discrete Title for a Sidebar <2>

**** <3>
Discrete titles are useful for labeling large sidebar and admonition blocks.
****
----
<1> Set the +discrete+ attribute above the title
<2> The title must be designated by two to six equal signs
<3> Delimiter specifying the beginning of a sidebar block

NOTE: You can also use the +float+ attribute to create a discrete title.
However, the content in the discrete section will not be repositioned (i.e., float) to the left or right of other content blocks.

=== Sections summary

.Section attributes and values
[cols="1,1,2,2"]
|===
|Attribute |Value(s) |Example Syntax |Comments

|sectid
|empty
|+:sectid!:+
|Intrinsic; Set to autogenerate by default

|idprefix
|_, empty, or user defined text
|+:idprefix: ~+
|Intrinsic; Set to autogenerate a +_+ by default
 
|sectanchors
|-
|+:sectanchors:+
|Asciidoctor only. 

|sectlinks
|-
|+:sectlinks:+
|Asciidoctor only. 

|numbered
|-
|+:numbered:+
|Section numbering is off by default.
Can be toggled on or off through document.
|===

== Blocks

NOTE: Section Pending

=== Title

You can assign a title to any paragraph, list, delimited block, or block macro.
In most cases, the title is displayed immediately above the content.
If the content is a figure or image, the title is displayed below the content.

A block title is defined on a line above the element.
The line must begin with a dot (+.+) and be followed immediately by the title text with no spaces in between.

Here's an example of a list with a title:

[source]
----
.TODO list
- Learn the AsciiDoc syntax
- Install Asciidoctor
- Write my document
----

=== Metadata

In addition to a title, a block can be assigned additional metadata including:

* Id (i.e., anchor)
* Style (first unnamed block attribute)
* Named block attributes

Here's an example of a quote block with metadata:

[source]
----
.Gettysburg Address <1>
[[gettysburg]] <2>
[quote, Abraham Lincoln, Soldiers' National Cemetery Dedication] <3> <4> <5>
____
Four score and seven years ago our fathers brought forth
on this continent a new nation...

Now we are engaged in a great civil war, testing whether
that nation, or any nation so conceived and so dedicated,
can long endure. ...
____
----
<1> Title: Gettysburg Address
<2> Id: gettysburg
<3> Style: quote
<4> attribution: Abraham Lincoln (Named block attribute)
<5> citetitle: Dedication of the Soldiers' National Cemetery (Named block attribute)

TIP: A block can have multiple block attribute lines.
The attributes will be aggregated.
If there is a name conflict, the last attribute defined wins.

Some metadata is used as supplementary content, such as the title, whereas other metadata controls how the block is rendered, such as the style.

////
Block id

NOTE: Pending

Block Style

A block style is the first positional attribute in the block attribute list.
////

=== Delimited blocks

The AsciiDoc syntax provides a set of components for including non-paragraph text--such as block quotes, source code listings, sidebars and tables--in your document.
These components are referred to as _delimited blocks_ because they are surrounded by delimiter lines.

Within the boundaries of a delimited block, you can enter any content or blank lines.
The block doesn't end until the ending delimiter is found.
The delimiters around the block determine the type of block, how the content is processed and rendered and what elements are used to wrap the content in the output.

==== Optional delimiters

If the content is contiguous (not interrupted by blank lines), you can forgo the use of the block delimiters and instead use the block style above a paragraph to repurpose it as one of the delimited block types.

This format is often used for single-line listings:

[source]
----
[listing]
sudo yum install asciidoc
----

or single-line quotes:

[source]
----
[quote]
Never do today what you can put off 'til tomorrow.
----

==== Masquerading blocks

Some blocks can masquerade as other blocks, a feature which is controlled by the block style.

=== Built-in block style summary

The following table identifies the built-in styles for paragraph blocks and delimited blocks, their purpose and what substitutions are performed on its content.

[cols="1,1m,1m,1,1"]
|===
|Style |Paragraph |Delimiter |Purpose |Substitutions

|abstract
|$$[abstract]$$
|$$--$$
|
|

|admonition
|$$LABEL:$$ or $$[LABEL]$$
|can masquerade
|
|

|appendix
|$$[appendix]$$
|
|
|

|example
|
|$$====$$
|Designates example content or defines an admonition block
|Normal

|fenced code
|
|$$```$$
|Source code or keyboard input to be displayed as entered
|Verbatim

|glossary
|$$[glossary]$$
|
|
|

|literal
|$$[literal]$$
|$$....$$
|Output text to be displayed exactly as entered
|Verbatim

|listing
|
|$$----$$
|Source code or keyboard input to be displayed as entered
|Verbatim

|partintro
|$$[partintro]$$
|can be used on an open block
|
|

|quote
|$$[quote]$$
|$$____$$*
|A quotation with optional attribution
|Normal

|verse
|$$[verse]$$
|$$____$$
|A verse with optional attribution
|Normal

|sidebar
|
|$$****$$
|Aside text rendered outside the flow of the document
|Normal

|source
|
|$$----$$
|Source code or keyboard input to be displayed as entered
|Verbatim

|table
|
|$$\|===$$
|Used to display tabular content or advanced layouts
|Varies

|open
|
|$$--$$
|Anonymous block that can act as any other block (except _pass_ or _table_)
|Varies

|passthrough
|
|$$++++$$
|Raw text to be passed through unprocessed
|Pass

|comment
|$$//$$
|$$////$$
|Private notes that are not displayed in the output
|None

|===
* additional forms available

This table shows the substitutions performed by each substitution group referenced in the previous table.

.Substitution groups
|===
|Group     |Special characters  |Quotes |Attributes |Replacements |Macros |Post replacements |Callouts

h|Header   |Yes                 |No     |Yes        |No           |No     |No                |No
h|None     |No                  |No     |No         |No           |No     |No                |No
h|Normal   |Yes                 |Yes    |Yes        |Yes          |Yes    |Yes               |No
h|Pass     |No                  |No     |Yes        |No           |Yes    |No                |No
h|Verbatim |Yes                 |No     |No         |No           |No     |No                |Yes
|===

== Paragraph

The bulk of the content in an AsciiDoc document is paragraph text.
Normal paragraphs do not require any special markup or attributes.
Just start typing.

....
In Asciidoctor, the main structural element is the paragraph.
A paragraph consists of adjacent lines of text.

To start a new paragraph, leave a blank line by hitting
Enter twice, then just keep on typing.
....

=== Wrapped text and hard line breaks

....
Adjacent lines like these are combined as a single paragraph.
That means you can wrap paragraph text
or put each sentence on a separate line
and the line breaks won't appear in the output.
....

Here's how the previous lines look when rendered:

____
Adjacent lines like these are combined as a single paragraph.
That means you can wrap paragraph text or put each sentence on a separate line and the line breaks won't appear in the output.
____

If you want line breaks in a paragraph to be preserved, add a space followed by a plus sign at the end of the sentence:

....
Roses are red, +
Violets are blue.
....

Alternatively, if you want line breaks in a paragraph to be preserved, add the following attribute entry to the header of your document.

 :hardbreaks:

=== Lead paragraph

Apply +role="lead"+ to any paragraph, and it will appear in the style of a lead paragraph (i.e., larger font).

----
[.lead]
This is the ultimate paragraph.
----

====
[.lead]
This is the ultimate paragraph.
====

== Text Formatting

Just as we emphasize certain words and phrases when we speak, we can emphasize them in text by surrounding them with punctuation.
AsciiDoc refers to this markup as _quoted text_.

CAUTION: You may not always want these symbols to indicate text formatting.
In those cases, you'll need to use markup to <<preventing-substitutions,escape the text>>.

=== Bold and italic

For instance, in an e-mail, you might ``speak'' a word louder by enclosing it in asterisks.

[source]
I can't believe it, we *won*!

As you would expect, the asterisks make the text *won* bold.
You can almost sense the emotion.
This is one example of quoted (i.e., formatted) text.

NOTE: The term ``quote'' is used liberally here to apply to any symbols that surround text in order to apply emphasis or special meaning.

Here are the bold and italic quoted text forms that Asciidoctor recognizes:

[role="unstyled"]
*$$*Bold*$$*:: One asterisk (+*+) on either side of a word or phrase makes it bold.
'$$'Italic'$$':: Single quotes around a word or phrase makes it italic.
_$$_Italic_$$_:: One underscore (+_+) on either side of a word or phrase also makes it italic.
*_$$*_Bold italic_*$$_*:: Bold markup around a word or phrase in italic makes it bold italic.
_Reversing the order of the markup won't produce the same result_.

----
_italic phrase_ (or 'italic phrase')

__i__talic le__tt__ers

*bold phrase*

**b**old le**tt**ers

*_bold italic phrase_*

**__b__**old italic le**__tt__**ers
----

====
_italic phrase_ (or 'italic phrase')

__i__talic le__tt__ers

*bold phrase*

**b**old le**tt**ers

*_bold italic phrase_*

**__b__**old italic le**__tt__**ers
====

CAUTION: You may not always want these substitutions to take place.
In those cases, you'll need to use markup to <<preventing-substitutions,escape the text>>.

When you want to quote text (e.g., place emphasis) somewhere other than at the boundaries of a word, you need to double up the punctuation.
For instance, to emphasis the first letter of a word, you need to surround it in double asterisks:

[source]
**F**our score and seven years ago...

The double punctuation applies for all types of quoted text except smart quotes, subscript and superscript.

=== Smart quotation marks

[role="unstyled"]
Single $$`smart quotes'$$:: One leading backtick (++$$`$$++) and one trailing single quote (++$$'$$++) around a word or phrase encloses it in single `smart quotes'.
Double $$``smart quotes''$$:: Two leading backticks (++$$``$$++) and two trailing single quotes (++''++) around a word or phrase encloses it in double ``smart quotes''.

----
`single smart quotes'

``double smart quotes''
----

====
`single smart quotes'

``double smart quotes''
====

=== Superscript and subscript

[role="unstyled"]
^$$^Superscript^$$^:: One caret (+^+) on either side of a word or phrase makes it superscript.
~$$~Subscript~$$~:: One tilde (+~+) on either side of a word or phrase makes it subscript.

----
^superscript phrase^

e = mc^2^

~subscript phrase~

H~2~O
----

====
^superscript phrase^

e = mc^2^

~subscript phrase~

H~2~O
====

=== Monospace

[role="unstyled"]
+$$+Monospace+$$+:: One plus (`+`) on either side of a word or phrase makes it monospaced (i.e., constant width).
+*$$+*Monospace bold*+$$*+:: Monospace markup around a word or phrase in bold makes it monospace bold.
+_$$+_Monospace italic_+$$_+:: Monospace markup around a word or phrase in italic makes it monospace italic.
_Reversing the order of the markup won't produce the same result_.

----
+monospace phrase+ and le++tt++ers

+_monospace italic phrase_+ and le++__tt__++ers

+*monospace bold phrase*+ and le++**tt**++ers

+*_monospace bold italic phrase_*+ and le++**__tt__**++ers

`inline literal passthrough` (monospace text without substitutions)
----

====
+monospace phrase+ and le++tt++ers

+_monospace italic phrase_+ and le++__tt__++ers

+*monospace bold phrase*+ and le++**tt**++ers

+*_monospace bold italic phrase_*+ and le++**__tt__**++ers

`inline literal passthrough` (monospace text without substitutions)
====

=== Custom styling with attributes

Any quoted text can be prefixed with an attribute list.
The first positional attribute is treated as a role.
The role can be used to apply custom styling to the text.
For instance:

[source]
Type the word [userinput]#asciidoc# into the search bar.

When rendering to HTML, the word ``asciidoc'' is wrapped in +<span>+ tags and the role is used as the element's CSS class:

[source,html]
<span class="userinput">asciidoc</span>

You can apply styles to the text using CSS.

[role="unstyled"]
$$#Open style#$$:: One hash (+#+) on either side of a word or phrase makes it possible to assign it a role (i.e., CSS class).

[source]
----
[small]#phrase styled by CSS class .small#

[big]##O##nce upon a time...
----

====
[small]#phrase styled by CSS class .small#

[big]##O##nce upon a time...
====

== Ordered Lists

Sometimes, we need to number the items in a list.
Instinct might tell you to prefix each item with a number, like in this next list:

[source]
----
1. Protons
2. Electrons
3. Neutrons
----

Since the numbering is obvious, the AsciiDoc processor will insert the numbers for you if you omit them:

[source]
----
. Protons
. Electrons
. Neutrons
----

=== Nested

You create a nested item by using one or more dots in front of each the item:

[source]
----
. Lists
.. Outline
... Unordered
... Ordered
.. Labeled
. Titles
.. Document
.. Section
.. Block
----

[TIP]
====
Like with the asterisks in an unordered list, the number of dots in an ordered list doesn't represent the nesting level.
However, it's much more intuitive to follow this convention:

[quote]
# of dots = level of nesting

Again, we are shooting for plain text markup that is readable _as is_.
====

AsciiDoc selects a different number scheme for each level of nesting.
Here's how the previous list renders:

.A nested ordered list
====
. Lists
.. Outline
... Unordered
... Ordered
.. Labeled
. Titles
.. Document
.. Section
.. Block
====

=== Title

You can give a list a title by prefixing the line with a dot immediately followed by the text (without leaving any space after the dot).

Here are examples of two lists with titles:

[source]
----
.Shopping list
* Milk
* Eggs
* Bread

.Parts of an atom
. Protons
. Electrons
. Neutrons
----

=== Numbering styles

For ordered lists, Asciidoctor supports the numeration styles such as lowergreek and decimal-leading-zero.

The full list of numeration styles that can be applied to an ordered list are as follows:

[cols="2,3", width="50%"]
.Asciidoctor ordered list numeration styles
|===
|Block style |CSS list-style-type

|arabic
|decimal

s|decimal{ast}
s|decimal-leading-zero

|loweralpha
|lower-alpha

|upperalpha
|upper-alpha

|lowerroman
|lower-roman

|upperroman
|upper-roman

s|lowergreek{ast}
s|lower-greek
|===
{ast} New in Asciidoctor 0.1.4. These two styles are only supported in the HTML backend.

Here are a few examples showing various numeration styles as defined by the block style shown in the header row:

|===
|[arabic]{ast} |[decimal] |[loweralpha] |[lowergreek]

a|
. one
. two
. three

a|
[decimal]
. one
. two
. three

a|
[loweralpha]
. one
. two
. three

a|
[lowergreek]
. one
. two
. three
|===

{ast} Default numeration if block style is not specified

TIP: Custom numeration styles can be implemented using a custom role.
Define a new class selector (e.g., +.custom+) in your stylesheet that sets the +list-style-type+ property to the value of your choice.
Then, assign the name of that class as a role on any list to which you want that numeration applied.

When the role shorthand (+.custom+) is used on an ordered list, the numeration style is no longer omitted.

You can override the number scheme for any level by setting its style (the first positional entry in a block attribute list).
You can also set the starting number using the +start+ attribute:

[source]
----
["lowerroman", start=5]
. Five
. Six
[loweralpha]
.. a
.. b
.. c
. Seven
----

=== Summary

NOTE: Pending

== Unordered Lists

If you were to create a list of items in an e-mail, how would you do it?
Chances are, what you'd type is exactly how you define an outline list in AsciiDoc.

Here's an example of a grocery list written as an unordered list in AsciiDoc:

[source]
----
* Milk
* Eggs
* Bread
* Bananas
----

Was your instinct to use a hyphen instead of an asterisk?
Guess what?
That works too:

[source]
----
- Milk
- Eggs
- Bread
- Bananas
----

TIP: You are free to indent the list however it suits you.

IMPORTANT: The item's first line of text must be offset from the marker by at least one space.

What if you wanted to group the grocery list by aisle?
Then you might organize it as a nested list.

=== Nested

To get a nested item, just add another asterisk in front of the item:

[source]
----
* Diary
** Milk
** Eggs
* Bakery
** Bread
* Produce
** Bananas
----

You can have up to five levels of nesting:

[source]
----
* Kingdom
** Phylum
*** Class
**** Order
***** Family
----

The hyphen doesn't work for nested lists since repeating hyphens are used for other purposes in AsciiDoc.

[TIP]
====
Since a hyphen only works for a single level nesting in an AsciiDoc list, I recommend reserving the hyphen for lists that only have a single level:


.List without nested items
[source]
----
- Fedora
- Ubuntu
- Slackware
----

For lists that have more than one level, use asterisks:

.List with nested items
[source]
----
* Linux
** Fedora
** Ubuntu
** Slackware
* BSD
** FreeBSD
** NetBSD
----

While it would seem as though the number of asterisks represents the nesting level, that's not how depth is determined.
A new level is created for each unique marker encountered.
However, it's much more intuitive to follow this convention:

[quote]
# of asterisks = level of nesting

After all, we are shooting for plain text markup that is readable _as is_.
====

=== Custom markers

Asciidoctor 0.1.4 offers additional bullet options for lists.
The list marker (bullet) is set using the list's block style. 

The unordered list marker can be set using any of the following block styles:

* square
* circle
* disc
* none or no-bullet (indented, but no bullet)
* unstyled (no indentation or bullet) (HTML only)

NOTE: These styles are supported by the default Asciidoctor stylesheet.

When present, the style name is assigned to the unordered list element as follows:

For HTML:: the style name is assigned to the +class+ attribute on the +<ul>+ element.
For DocBook:: the style name is assigned to the +mark+ attribute on the +<itemizedlist>+ element.

Here's an unordered list that has square bullets:

----
[square]
* one
* two
* three
----

====
[square]
* one
* two
* three
====

=== Checklist

List items can be marked complete using checklists.

Checklists (i.e., task lists) are unordered lists that have items marked as checked (+[*]+ or +[x]+) or unchecked (+[ ]+).
Here's an example:

.Checklist
----
- [*] checked
- [x] also checked
- [ ] not checked
-     normal list item
----

====
- [*] checked
- [x] also checked
- [ ] not checked
-     normal list item
====

TIP: Not all items in the list have to be checklist items, as the previous example shows.

When checklists are rendered to HTML, the checkbox markup is transformed into an HTML checkbox with the appropriate checked state.
The +data-item-complete+ attribute on the checkbox is set to 1 if the item is checked, 0 if not.
The checkbox is used in place of the item's bullet.

Since HTML generated by Asciidoctor is usually static, the checkbox is set as disabled to make it appear as a simple mark.
If you want to make the checkbox interactive (i.e., clickable), add the +interactive+ option to the checklist:

.Checklist with interactive checkboxes
----
[options=interactive]
- [*] checked
- [x] also checked
- [ ] not checked
-     normal list item
----

As a bonus, if you enable font-based icons, the checkbox markup (in non-interactive lists) is transformed into a font-based icon!

.Checklist with font-based checkboxes
----
:icons: font

- [*] checked
- [x] also checked
- [ ] not checked
-     normal list item
----

=== Summary

NOTE: Pending

== Labeled List

Labeled lists are useful when you need to include a description or supporting text for each item in a list.
Each item in a labeled list consists of a term or phrase followed by:

* a separator (typically a double colon, +::+)
* at least one space or endline
* the item's content

Here's an example of a labeled list that identifies parts of a computer:

[source]
----
CPU:: The brain of the computer.
Hard drive:: Permanent storage for operating system and/or user files.
RAM:: Temporarily stores information the CPU uses during operation.
Keyboard:: Used to enter text or control items on the screen.
Mouse:: Used to point to and select items on your computer screen.
Monitor:: Displays information in visual form using text and graphics.
----

By default, the content of each item is displayed below the label when rendered.
Here's a preview of how this list is rendered:

.A basic labeled list
====
CPU:: The brain of the computer.
Hard drive:: Permanent storage for operating system and/or user files.
RAM:: Temporarily stores information the CPU uses during operation.
Keyboard:: Used to enter text or control items on the screen.
Mouse:: Used to point to and select items on your computer screen.
Monitor:: Displays information in visual form using text and graphics.
====

If you want the label and content to appear on the same line, add the horizontal style to the list.

[source]
----
[horizontal]
CPU:: The brain of the computer.
Hard drive:: Permanent storage for operating system and/or user files.
RAM:: Temporarily stores information the CPU uses during operation.
----

[horizontal]
CPU:: The brain of the computer.
Hard drive:: Permanent storage for operating system and/or user files.
RAM:: Temporarily stores information the CPU uses during operation.

The content of a labeled list can be any AsciiDoc element.
For instance, we could rewrite the grocery list from above so that each aisle is a label rather than a parent outline list item.

[source]
----
Diary::
* Milk
* Eggs
Bakery::
* Bread
Produce::
* Bananas
----

Labeled lists are quite lenient about whitespace, so you can spread the items out and even indent the content if that makes it more readable for you:

//[source]
----
Diary::

  * Milk
  * Eggs

Bakery::

  * Bread

Produce::

  * Bananas
----

=== Question and answer style list

.Q&A
----
[qanda]
What is Asciidoctor?::
  An implementation of the AsciiDoc processor in Ruby.
What is the answer to the Ultimate Question?:: 42
----

====
[qanda]
What is Asciidoctor?::
  An implementation of the AsciiDoc processor in Ruby.
What's the answer to the Ultimate Question?:: 42
====

=== Summary

NOTE: Section pending

== Hybrid Lists

You can mix and match the three list types within a single hybrid list.
AsciiDoc works hard to infer the relationships between the items that are most intuitive to us humans.

Here's an example of nesting an unordered list inside of an ordered list:

[source]
----
. Linux
* Fedora
* Ubuntu
* Slackware
. BSD
* FreeBSD
* NetBSD
----

Again, you can spread the items out and indent the nested lists if that makes it more readable for you:

//[source]
----
. Linux

  * Fedora
  * Ubuntu
  * Slackware

. BSD

  * FreeBSD
  * NetBSD
----

Here's a list that mixes all three types of lists:

//[source]
----
Operating Systems::
  . Linux
    * Fedora
    * Ubuntu
    * Slackware
  . BSD
    * FreeBSD
    * NetBSD
Cloud Providers::
  . PaaS
    * OpenShift
    * CloudBees
  . IaaS
    * Amazon EC2
    * Rackspace
----

Here's how the list is rendered:

.A hybrid list
====
Operating Systems::
  . Linux
    * Fedora
    * Ubuntu
    * Slackware
  . BSD
    * FreeBSD
    * NetBSD
Cloud Providers::
  . PaaS
    * OpenShift
    * CloudBees
  . IaaS
    * Amazon EC2
    * Rackspace
====

You can include more complex content in a list item as well.

=== Complex list content

Aside from nested lists, all of the list items you've seen only have one line of text.
A list item can hold any type of AsciiDoc content, including paragraphs, listing blocks and even tables.
You just need to ``attach'' them to the list item.

Like with regular paragraph text, the text in a list item can wrap across any number of lines, as long as all the lines are adjacent.
The wrapped lines can be indented and they will still be treated as normal paragraph text.
For example:

//[source]
----
* The header in AsciiDoc is optional, but if
it is used it must start with a document title.

* Optional Author and Revision information
immediately follows the header title.

* The document header must be separated from
  the remainder of the document by one or more
  blank lines and cannot contain blank lines.
----

TIP: When items contain more than one line of text, leave a blank line before the next item to make the list easier to read.

If you want to attach additional paragraphs to a list item, you ``add'' them together using a _list continuation_.
A list continuation is a +$$+$$+ symbol on a line by itself, immediately adjacent to the two blocks it's connecting.
Here's an example:

//[source]
----
* The header in AsciiDoc must start with a
  document title.
+
The header is optional.

* Optional Author and Revision information
  immediately follows the header title.
----

Using the list continuation, you can attach any type of block element and you can use the list continuation any number of times in a single list item.

Here's an example that attaches both a listing block and an admonition paragraph to the first item:

//[source]
....
* The header in AsciiDoc must start with a
  document title.
+
----
= Document Title
----
+
NOTE: The header is optional.

* Optional Author and Revision information
  immediately follows the header title.
+
----
= Document Title
Doc Writer <doc.writer@asciidoc.org>
v1.0, 2013-01-01
----
....

Here's how the source is rendered:

.A list with complex content
====
* The header in AsciiDoc must start with a
  document title.
+
----
= Document Title
----
+
NOTE: The header is optional.

* Optional Author and Revision information
  immediately follows the header title.
+
----
= Document Title
Doc Writer <doc.writer@asciidoc.org>
v1.0, 2013-01-01
----
====

=== Dividing lists

If you have adjacent lists, they have the tendency to want to fuse together.
To force the lists apart, place a line comment between them, offset on either side by a blank line (i.e., an end of list marker).
Here's an example:

[source]
----
* Apples
* Oranges
* Bananas

//^

* Walnuts
* Almonds
* Cashews
----

== Tables

Tables are one of the most refined areas of the AsciiDoc syntax.
They are easy to create, easy to read in raw form and also remarkably sophisticated.

Tables are delimited by +|===+ and made up of cells.
The default table data format is +psv+ (Prefix Separated Values), which means that the processor creates a new cell each time it encounters a vertical bar (+|+).
The cells are grouped into rows.
Each row must share the same number of cells, taking into account any <<cell-specifiers,column or row spans>>.
Then, each consecutive cell in a row is placed in a separate column.
The simple table example below consists of two columns and three rows.

.Simple table
[source]
----
|=== <1>
<2>
| Cell in column 1, row 1 | Cell in column 2, row 1  <3> 
<4>
| Cell in column 1, row 2 | Cell in column 2, row 2

| Cell in column 1, row 3 | Cell in column 2, row 3

|=== <1>
----
<1> The table's content boundaries are defined by a vertical bar followed by three equal signs (+|===+).
<2> A blank line separates the table delimiter and the first row so the first row is not styled as the table's header.
<3> The new cell is marked by a vertical bar (+|+).
<4> Rows are separated by blank lines.

.Result: Rendered simple table
[width="90"]
|===

| Cell in column 1, row 1 | Cell in column 2, row 1

| Cell in column 1, row 2 | Cell in column 2, row 2

| Cell in column 1, row 3 | Cell in column 2, row 3

|===

The leading and trailing spaces around the content in a cell are stripped; therefore, they don't affect the table's layout when it is rendered.
The two examples below illustrate how leading and trailing spaces don't change the rendered table's layout.

.Cell content adjacent to the +|+
[source]
----
|===

|Cell in column 1, row 1|Cell in column 2, row 1

|===
----

.Result: Rendered table when cell content was entered adjacent to the +|+
[width="90"]
|===

|Cell in column 1, row 1|Cell in column 2, row 1

|===

.Cell content with varying leading and trailing spaces
[source]
----
|===

| Cell in column 1, row 1        |          Cell in column 2, row 1

|===
----

.Result: Rendered table when cell content was bounded by varying leading and trailing spaces
[width="90"]
|===

| Cell in column 1, row 1        |          Cell in column 2, row 1

|===

There are multiple ways to group cells into a row.
The cells in a row can be placed on:

[loweralpha]
. the same line
. consecutive, individual lines
. a combination of a and b

.Cells on the same line
----
|===

|Cell in column 1, row 1 |Cell in column 2, row 1 |Cell in column 3, row 1

|Cell in column 1, row 2 |Cell in column 2, row 2 |Cell in column 3, row 2

|===
----

.Result: Rendered table when multiple cells where entered on the same line
[width="90"]
|===

|Cell in column 1, row 1 |Cell in column 2, row 1 |Cell in column 3, row 1

|Cell in column 1, row 2 |Cell in column 2, row 2 |Cell in column 3, row 2

|===

When the cells of a row are individually entered on consecutive lines, the +cols+ attribute is needed to specify the number of columns in the table.
If the +cols+ attribute is not set, the first non-blank line inside the block delimiter (+|===+) determines the number of columns.

.Cells on consecutive, individual lines
----
[cols="3*"] <1>
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===
----
<1> The +cols+ attribute states that this table has three columns. The +*+ is a repeat operator which is explained in the <<column-specifiers>> section below.

.Result: Rendered table when cells where listed on consecutive, individual lines
[width="90"]
[cols="3*"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===

Rows can be formed from adjacent lines of individual cells and cells listed on the same line.

.Cells on the same line and individual lines
----
[cols="3*"]
|===
|Cell in column 1, row 1 |Cell in column 2, row 1 
|Cell in column 3, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2 |Cell in column 3, row 2
|===
----

.Result: Cells on the same line and individual lines
[width="90"]
[cols="3*"]
|===
|Cell in column 1, row 1 |Cell in column 2, row 1 
|Cell in column 3, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2 |Cell in column 3, row 2
|===

The next sections describe and demonstrate the variety of ways you can customize table cells, rows and columns.

=== Columns

The number of columns in a table is determined by the number of cells found in the first non-blank line after the table delimiter (+|===+) or by the values assigned to the +cols+ attribute.

For example, the syntax in the two examples below will both render a table with two columns.

----
|===

|Cell in column 1, row 1 |Cell in column 2, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2

|===
----

.Result: Rendered table with two columns as defined by the number of cells in the first row
[width="90"]
|===

|Cell in column 1, row 1 |Cell in column 2, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2

|===

----
[cols="2*"]
|===

|Cell in column 1, row 1
|Cell in column 2, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2

|===
----

.Result: Rendered table with two columns as defined by the +cols+ attribute
[width="90"]
[cols="2*"]
|===

|Cell in column 1, row 1
|Cell in column 2, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2

|===

When a single number is assigned to the +cols+ attribute, its value indicates the number of columns.
Each column will be the same width.
However, the number of columns can also be assigned as a comma delimited list.
The number of entries in the list determines the number of columns.

The comma delimited list below creates a table with four columns of equal width.

 [cols="1,1,1,1"]

This syntax provides that same result:

 [cols="4*"]

Now, let's talk about that asterisk in the syntax above.

=== Column specifiers

The AsciiDoc syntax provides a variety of ways to control the size, style and layout of content within columns.
These *specifiers* can be applied to whole columns.

To apply a specifier to a column, you must set the +cols+ attribute and assign it a value.
A column specifier can contain any of the following components:

* multiplier
* align
* width
* style

Each component is optional.

The multiplier operator (+*+) is used when you want a specifier to apply to more than one consecutive column.
If used, the multiplier must always be placed at the beginning of the specifier.

For example:

----
[cols="3*"] <1>
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===
----
<1> The table will consist of three columns, as indicated by the *3*. The +*+ operator ensures that the default layout and style will be applied to all of the columns.

.Result: Rendered table with multiplier applied
[width="90"]
[cols="3*"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===

[[column-align]]
The alignment component allows you to horizontally or vertically align a column's content.
Content can be horizontally aligned left (+<+), center (+^+), or right (+>+).

To horizontally center the content in all of the columns, add the +^+ operator after the multiplier.

----
[cols="3*^"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===
----

.Result: Rendered table with horizontal, center alignment applied to all columns
[width="90"]
[cols="3*^"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===

What if you only want to center the content in the last column?
Assign the default styles to the preceding columns, and +^+ to the last column in a comma separated list.

----
[cols="2*,^"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===
----

.Result: Rendered table with horizontal, center alignment applied to last column
[width="90"]
[cols="2*,^"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===

Let's specify a different horizontal alignment for each column.

----
[cols="<,^,>"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===
----

.Result: Rendered table with a different horizontal alignment for each column
[width="90"]
[cols="<,^,>"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===

You'll notice that the content in the examples above is only centered on the horizontal.
It can also be aligned vertically when the alignment operator is prefixed with a dot (+.+).
Content can be vertically aligned to the top (+<+), middle (+^+), or bottom (+>+) of a cell.

To vertically align the content to the middle of the cells in all of the columns, add a +.+ and then the +^+ operator after the multiplier.

----
[cols="3*.^"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===
----

.Result: Rendered table with vertical, middle alignment applied to all columns
[width="90"]
[cols="3*.^"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===

If you only want to align the content to the bottom of each cell in the last column, you'd assign the default styles to the preceding columns, and +>+ to the last column in a comma separated list.

----
[cols="2*,.>"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===
----

.Result: Rendered table with vertical, bottom alignment applied to last column
[width="90"]
[cols="2*,.>"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===

Let's specify a different vertical alignment for each column.

----
[cols=".<,.^,.>"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===
----

.Result: Rendered table with a different vertical alignment for each column
[width="90"]
[cols=".<,.^,.>"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===

Finally, we'll also horizontally center the content in the last column.

----
[cols=".<,.^,^.>"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===
----

.Result: Rendered table with a different vertical alignment for each column and horizontal, center alignment in the last column
[width="90"]
[cols=".<,.^,^.>"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===

When both a horizontal and vertical alignment is assigned to a column, the horizontal alignment operator must precede the vertical operator.

The width component sets the width of a column.
Its value can be a proportional integer (the default is 1) or a percentage (1 to 99).

----
[cols="1,2,6"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===
----

.Result: Table rendered with column sizes adjusted by a proportional integer
[cols="1,2,6"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===

When assigning percentage values to the +cols+ attribute, you do not need to include the percent sign (+%+).

----
[cols="50,20,30"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===
----

.Result: Table rendered with column sizes adjusted by a percentage
[cols="50,20,30"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|===

Let's create a table with custom widths and alignments.

----
[cols=".<2,.^5,^.>3"]
|===
|Cell in column 1, row 1 with lots and lots and lots and lots of content
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2 and another bucket of content, and then a jelly roll of content
|===
----

.Result: Rendered table with variable widths and alignments
[cols=".<2,.^5,^.>3"]
|===
|Cell in column 1, row 1 with lots and lots and lots and lots of content
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2 and another bucket of content, and then a jelly roll of content
|===

[[column-style]]
The style component must always be located at the end of the specifier.
When no style name is provided column contents will be processed as regular inline text.

The column styles are described in the table below.

[cols="20,30,50"]
|===
|Style Name |Value |Description

|AsciiDoc
|+a+ or +asciidoc+
|Any document section elements may be contained within the column. The elements will be processed and rendered

|Emphasis
|+e+ or +emphasis+
|Text is italicized

|Header
|+h+ or +header+
|Header styles are applied to the column

|Literal
|+l+ or +literal+
|Column content is treated as if it were inside a literal block

|Monospaced
|+m+ or +monospaced+
|Text is rendered in monospaced font

|Strong
|+s+ or +strong+
|Text is bolded

|Verse
|+v+ or +verse+
|Column content is treated as if it were inside a verse block
|===

Let's apply the header style to the first column, the monospaced style to the second, the strong style to the third, and the emphasis style to the fourth.
 
----
[cols="h,m,s,e"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1
|Cell in column 4, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|Cell in column 4, row 2
|===
----

.Result: Rendered table with a header, monospaced, and strong styled column
[width="90"]
[cols="h,m,s,e"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1
|Cell in column 4, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2
|Cell in column 3, row 2
|Cell in column 4, row 2
|===

Specifiers can also be applied to individual cells.

=== Cell specifiers

In addition to sharing many of the column specifier capabilities, cell specifiers allow cells to span rows and columns.
Like a column specifier, a cell specifier is made up of components.
These components, listed and defined below, are all optional.

* span
* align
* style

A cell specifier is prefixed directly to the cell delimiter (+|+) preceding the content you want to customize.

The span component can duplicate a cell or have it span multiple rows or columns.

To duplicate a cell in multiple, consecutive columns, prefix the +|+ with the multiplication factor and the +*+ operator.

.Cell duplicated across three columns
----
|===

|Cell in column 1, row 1 |Cell in column 2, row 1 |Cell in column 3, row 1

3*|Same cell content in columns 1, 2, and 3

|Cell in column 1, row 3 
|Cell in column 2, row 3
|Cell in column 3, row 3

|===
----

.Result: Rendered table where cell was duplicated across three columns
[width="90"]
|===

|Cell in column 1, row 1 |Cell in column 2, row 1 |Cell in column 3, row 1

3*|Same cell content in columns 1, 2, and 3

|Cell in column 1, row 3 
|Cell in column 2, row 3
|Cell in column 3, row 3

|===

To have a cell span multiple, consecutive columns, prefix the +|+ with the span factor and the +++ operator.

.Cell spanning three columns
----
|===

|Cell in column 1, row 1 |Cell in column 2, row 1 |Cell in column 3, row 1

3+|Content in a single cell that spans columns 1, 2, and 3

|Cell in column 1, row 3 
|Cell in column 2, row 3
|Cell in column 3, row 3

|===
----

.Result: Rendered table where cell spans three columns
[width="90"]
|===

|Cell in column 1, row 1 |Cell in column 2, row 1 |Cell in column 3, row 1

3+|Content in a single cell that spans columns 1, 2, and 3

|Cell in column 1, row 3 
|Cell in column 2, row 3
|Cell in column 3, row 3

|===

If you want to have a cell span multiple, consecutive rows, prefix the span factor with a dot (+.+).

.Cell spanning two rows
----
|===

|Cell in column 1, row 1 |Cell in column 2, row 1 |Cell in column 3, row 1

.2+|Content in a single cell that spans rows 2 and 3
|Cell in column 2, row 2
|Cell in column 3, row 2

|Cell in column 2, row 3
|Cell in column 3, row 3

|===
----

.Result: Rendered table where a cell spans two rows
[width="90"]
|===

|Cell in column 1, row 1 |Cell in column 2, row 1 |Cell in column 3, row 1

.2+|Content in a single cell that spans rows 2 and 3
|Cell in column 2, row 2
|Cell in column 3, row 2

|Cell in column 2, row 3
|Cell in column 3, row 3

|===

The alignment component for cells works the same as the <<column-align,column specifier alignment component>>.

.Cells aligned horizontally, vertically, and across a span of three columns
----
[cols="3"]
|===
^|Prefix the +{brvbar}+ with +{caret}+ to center content horizontally
<|Prefix the +{brvbar}+ with +{lt}+ to align the content to the left horizontally
>|Prefix the +{brvbar}+ with +{gt}+ to align the content to the right horizontally

.^|Prefix the +{brvbar}+ with a +.+ and +{caret}+ to center the content in the cell vertically
.<|Prefix the +{brvbar}+ with a +.+ and +{lt}+ to align the content to the top of the cell
.>|Prefix the +{brvbar}+ with a +.+ and +{gt}+ to align the content to the bottom of the cell

3+^.^|This content spans three columns (+3{plus}+) and is centered horizontally (+{caret}+) and vertically (+.{caret}+) within the cell.

|===
----

.Result: Rendered cells aligned horizontally, vertically, and across a span of three columns
[width="90"]
[cols="3"]
|===
^|Prefix the +{brvbar}+ with +{caret}+ to center content horizontally
<|Prefix the +{brvbar}+ with +{lt}+ to align the content to the left horizontally
>|Prefix the +{brvbar}+ with +{gt}+ to align the content to the right horizontally

.^|Prefix the +{brvbar}+ with a +.+ and +{caret}+ to center the content in the cell vertically
.<|Prefix the +{brvbar}+ with a +.+ and +{lt}+ to align the content to the top of the cell
.>|Prefix the +{brvbar}+ with a +.+ and +{gt}+ to align the content to the bottom of the cell

3+^.^|This content spans three columns (+3{plus}+) and is centered horizontally (+{caret}+) and vertically (+.{caret}+) within the cell.

|===

TIP: To use a pipe (+|+) within the content of a cell without creating a new cell, you must use the +$${brvbar}$$+ attribute.

The <<column-style,style component>> can also be applied to individual cells.
For example, you can apply the AsciiDoc element styles to an individual cell by prefixing the vertical bar with an +a+.

.Comparing cells using AsciiDoc styles and no AsciiDoc styles
----
[cols="2"]
|===

a|This cell is prefixed with an +a+ so the following list is rendered with the AsciiDoc list element styles.

* List item 1
* List item 2
* List item 3
|This cell *is not* prefixed with an +a+ so the following list is not rendered with the AsciiDoc list element styles.

* List item 1
* List item 2
* List item 3

a|This cell is prefixed with an +a+ so the following paragraph is rendered with the +lead+ style.

[.lead]
I am a paragraph styled with the lead attribute.
|This cell *is not* prefixed with an +a+ so the following paragraph is not rendered with the +lead+ style.

[.lead]
I am a paragraph styled with the lead attribute.

|===
----

.Result: Rendered table comparing cells using AsciiDoc styles and no AsciiDoc styles
[width="90"]
[cols="2"]
|===

a|This cell is prefixed with an +a+ so the following list is rendered with the AsciiDoc list element styles.

* List item 1
* List item 2
* List item 3
|This cell *is not* prefixed with an +a+ so the following list is not rendered with the AsciiDoc list element styles.

* List item 1
* List item 2
* List item 3

a|This cell is prefixed with an +a+ so the following paragraph is rendered with the +lead+ style.

[.lead]
I am a paragraph styled with the lead attribute.
|This cell *is not* prefixed with an +a+ so the following paragraph is not rendered with the +lead+ style.

[.lead]
I am a paragraph styled with the lead attribute.

|===

For the grand finale, let's apply a variety of specifiers to individual cells.

.Building a variety of cell specifiers
----
|===

2*>m|This content is duplicated across two columns.
 
It is aligned right horizontally.

And it is monospaced.

.3+^.>s|This cell spans 3 rows. The content is centered horizontally, aligned to the bottom of the cell, and strong.
e|This content is emphasized.

.^l|This content is aligned to the top of the cell and literal.

v|This cell contains a verse 
that may one day expound on the 
wonders of tables in an 
epic sonnet.

|===
----

.Result: Rendered table featuring a variety of cell specifiers
[width="90"]
|===

2*>m|This content is duplicated across two columns.
 
It is aligned right horizontally.

And it is monospaced.

.3+^.>s|This cell spans 3 rows. The content is centered horizontally, aligned to the bottom of the cell, and strong.
e|This content is emphasized.

.^l|This content is aligned to the top of the cell and literal.

v|This cell contains a verse 
that may one day expound on the 
wonders of tables in an 
epic sonnet.

|===

=== Header row

The first row of a table can be rendered as a header row with the +header+ value.
The +header+ value is assigned by setting the +options+ attribute or based on the table's layout.

The +options+ attribute is set in the table's attribute list and assigned the value +header+ in the example below.

.Table with the +header+ value assigned to the +options+ attribute
[source]
----
[cols="2*", options="header"]
|===
|Name of Column 1
|Name of Column 2

|Cell in column 1, row 1
|Cell in column 2, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2
|===
----

.Result: Rendered table when the +header+ value is assigned to the +options+ attribute
[width="90"]
[cols="2*", options="header"]
|===
|Name of Column 1
|Name of Column 2

|Cell in column 1, row 1
|Cell in column 2, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2
|===

Alternatively, you can define the header row based on how you layout the table.
Asciidoctor 0.1.4 introduced the following conventions to determine when the first row should become the header row:

. The first line of content inside the table block delimiters is not empty.
. The second line of content inside the table block delimiters is empty.
. The +options+ attribute has not been specified in the block attributes.

As seen in the result of the example below, if all of these rules hold, then the first row of the table is treated as a header.

.Table that has an implicit header row
[source]
----
|===
|Name of Column 1 |Name of Column 2

|Cell in column 1, row 1
|Cell in column 2, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2
|===
----

.Result: Rendered table when the header row was assigned implicitly
[width="90"]
|===
|Name of Column 1 |Name of Column 2

|Cell in column 1, row 1
|Cell in column 2, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2
|===

Notice that when the implicit method of assigning the header row is used, it is not necessary to set the +cols+ attribute.

CAUTION: We're considering using a similar convention for enabling the footer in the future.
Thus, if you rely on this convention to enable the header row, it's advised that you not put all the cells in the last row on the same line unless you intend on making it the footer row.

=== Footer row

The last row of a table can be styled as a footer by assigning the +footer+ value to the +options+ attribute.

----
[options="header,footer"]
|===
|Name of Column 1 |Name of Column 2

|Cell in column 1, row 1
|Cell in column 2, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2

|Footer in column 1, row 3
|Footer in column 2, row 3
|===
----

.Result: Table rendered with a footer
[width="90"]
[options="header,footer"]
|===
|Name of Column 1 |Name of Column 2

|Cell in column 1, row 1
|Cell in column 2, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2

|Footer in column 1, row 3
|Footer in column 2, row 3
|===

TIP: Remember that when the +options+ attribute is set, and you want the first row of the table to be displayed as a header, you must assign the +header+ value.

=== Table lines, placement, and size

There are several attributes available for customizing the placement, size and lines of a table.

By the default a table will stretch to 100 percent of the page width.
To reduce the width of the table, set the width attribute in the table's attribute list.
The width value can be any number between 1 and 99.

.Table with width set to 65%
----
[width="65"]
|===
|Name of Column 1 |Name of Column 2 |Name of Column 3

|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2
|Cell in column 3, row 2
|===
----

.Result: Render table with a width of 65%
[width="65"]
|===
|Name of Column 1 |Name of Column 2 |Name of Column 3

|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2
|Cell in column 3, row 2
|===

The border around a table can be changed by setting the +frame+ attribute.
By default, the +frame+ attribute is assigned the +all+ value, which draws a border on each side of the table.
If you set the frame attribute, you can override the default value with +topbot+, +sides+ or +none+.

The +topbot+ value draws a border on the top and bottom of the table.

----
[frame="topbot"]
|===
|Name of Column 1 |Name of Column 2 |Name of Column 3

|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2
|Cell in column 3, row 2
|===
----

.Result: Table rendered with +topbot+ value
[width="90"]
[frame="topbot"]
|===
|Name of Column 1 |Name of Column 2 |Name of Column 3

|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2
|Cell in column 3, row 2
|===

The +sides+ value draws a border on the right and left side of the table.

----
[frame="sides"]
|===
|Name of Column 1 |Name of Column 2 |Name of Column 3

|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2
|Cell in column 3, row 2
|===
----

.Result: Table rendered with +sides+ value
[width="90"]
[frame="sides"]
|===
|Name of Column 1 |Name of Column 2 |Name of Column 3

|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2
|Cell in column 3, row 2
|===

The +none+ value removes the borders around the table.

----
[frame="none"]
|===
|Name of Column 1 |Name of Column 2 |Name of Column 3

|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2
|Cell in column 3, row 2
|===
----

.Result: Table rendered with +none+ value
[width="90"]
[frame="none"]
|===
|Name of Column 1 |Name of Column 2 |Name of Column 3

|Cell in column 1, row 1
|Cell in column 2, row 1
|Cell in column 3, row 1

|Cell in column 1, row 2 
|Cell in column 2, row 2
|Cell in column 3, row 2
|===

NOTE: At this time, Asciidoctor has not implemented the +float+, +align+, +halign+, +valign+, or +grid+ attributes.

=== Data formats

Tables can be created from Comma Separated Values (CSV) and Delimiter Separated Values (DSV).
To use these type of datasets, set the +format+ attribute and assign it the +csv+ or +dsv+ value.
Tables using these alternate data formats are structured and formatted exactly like +psv+ tables, the data separators are just different.

When the format is set to +csv+ the data separator is a comma (+,+), as seen in the table below.

[source]
----
[format="csv", options="header"]
|===
Artist,Track,Genre
Baauer,Harlem Shake,Hip Hop
The Lumineers,Ho Hey,Folk Rock
|===
----

.Result: Rendered +csv+ table
[width="90"]
[format="csv", options="header"]
|===
Artist,Track,Genre
Baauer,Harlem Shake,Hip Hop
The Lumineers,Ho Hey,Folk Rock
|===

When the format is +dsv+, the data separator is a colon (+:+).

[source]
----
[format="dsv", options="header"]
|===
Artist:Track:Genre
Robyn:Indestructable:Dance
The Piano Guys:Code Name Vivaldi:Classical
|===
----

.Result: Rendered +dsv+ table
[width="90"]
[format="dsv", options="header"]
|===
Artist:Track:Genre
Robyn:Indestructable:Dance
The Piano Guys:Code Name Vivaldi:Classical
|===

Asciidoctor also provides shorthand notation for setting +csv+ and +dsv+ table formats.
The first position of the table block delimiter (i.e., +|===+) can be replaced by the data delimiter to set the table format.

Instead of specifying the +csv+ format using a block attribute, you can simply replace the leading pipe (+|+) with a comma (+,+):

[source]
----
,===
Artist,Track,Genre

Baauer,Harlem Shake,Hip Hop
,===
----

.Result: Rendered +csv+ table using shorthand syntax
[width="90"]
,===
Artist,Track,Genre

Baauer,Harlem Shake,Hip Hop
,===

In the same way, the +dsv+ format can be specified by replacing the leading pipe (+|+) with a colon (+:+).

[source]
----
:===
Artist:Track:Genre

Robyn:Indestructable:Dance
:===
----

.Result: Rendered +dsv+ table using shorthand syntax
[width="90"]
:===
Artist:Track:Genre

Robyn:Indestructable:Dance
:===

DSV and CSV datasets can also be inserted into a table using the <<include-directive,+include::[]+ directive>>.

[source]
----
[format="csv", options="header"]
|===
\include::tracks.csv[]
|===
----

.Result: Rendered table of CSV data pulled from a separate file
[width="90"]
[format="csv", options="header"]
|===
include::tracks.csv[]
|===

=== Summary

.Table attributes and values
[cols="1m,2,1m,2,2"]
|===
|Attribute |Description |Value |Description |Notes

.3+|format
.3+|data format of the table's contents
|psv
|Prefixed Separated Values, default, cells are delimited by a +{brvbar}+
.3+|

|dsv
|Delimiter Separated Values, cells are delimited by a colon (+:+)


|csv
|Comma Separated Values, cells are delimited by a comma (+,+)

|separator
|cell separator
d|+{brvbar}+, +:+, +,+, +!+, or a user defined attribute
|+{brvbar}+ is the default, +!+ separates cells in nested +psv+ tables
|

.4+|frame
.4+|draws a border around the table
|all
|default, border on all sides
.4+|

|topbot
|border on top and bottom

|none
|no borders

|sides 
|border on left and right sides

.4+|grid
.4+|draws boundary lines between rows and columns
|all
|default, draws boundary lines around each cell
.4+|Not yet implemented in Asciidoctor.

|cols
|draws boundary lines between columns

|rows
|draws boundary lines between rows

|none
|no boundary lines

.3+|align
.3+|horizontally aligns table within page width
|left
|default, aligns to left side of page
.3+|Not yet implemented in Asciidoctor. AsciiDoc HTML output only.
The +align+ and +float+ attributes are mutually exclusive.

|right
|aligns to right side of page

|center
|horizontally aligns to center of page

.2+|float
.2+|aligns the table to the side of the page in conjunction with the table's +width+ attribute
|left
|default, aligns the table with the left side of the page
.2+|Not yet implemented in Asciidoctor. AsciiDoc HTML output only.
The +float+ and +align+ attributes are mutually exclusive.

|right
|aligns the table with the right side of the page

.3+|halign
.3+|horizontally aligns all of the cell contents in a table
|left
|default, aligns the contents of the cells to the left
.3+|Not yet implemented in Asciidoctor. AsciiDoc HTML output only.
Overridden by column and cell specifiers.

|right
|aligns the contents of the cells to the right

|center
|aligns the contents to the cell centers

.3+|valign
.3+|vertically aligns all of the cell contents in a table
|top
|default, aligns the cell contents to the top of the cell
.3+|Not yet implemented in Asciidoctor. AsciiDoc HTML output only.
Overridden by column and cell specifiers.

|bottom
|aligns the cell contents to the bottom of the cell

|middle
|aligns the cell contents to the middle of the cell

.2+|options
.2+|comma separated list of table values
|header
|styles the first table row
.2+|By default header and footer rows are omitted

|footer
|styles the last table row

|cols
|comma separated list of column specifiers
d|specifiers
|
|

|width
|the table width relative to the available page width
d|user defined value
|a percentage between 1 and 99
|

|filter
|a shell command for content within a cell
|
|
|
|===

== Horizontal Rules

----
'''
----

====
'''
====

=== Markdown-style horizontal rules

Asciidoctor continues to expand support for (reasonable) Markdown syntax by recognizing Markdown horizontal rules.
The motivation here is to ease migration (both of the content and the mind).

To avoid conflicts with the syntax of AsciiDoc block delimiters, only 3 repeating characters (+-+ or +*+) are recognized.
As with Markdown, whitespace between the characters is optional.

.Recognized Markdown horizontal rule syntax
----
---

- - -

***

* * *
----

A macro definition for the Markdown horizontal rules is included in the AsciiDoc compatibility file so they can be recognized by the +asciidoc+ command as well.

=== Summary

NOTE: Section pending

== Page break

----
<<<
----

== URLs

There's nothing you have to do to make a link to a URL.
Just include the URL in the document and AsciiDoc will turn it into a link.

.External
----
http://asciidoc.org! <1>

http://asciidoc.org[AsciiDoc] <2>

https://github.com/asciidoctor[Asciidoctor @ *GitHub*] <3>

devel@discuss.arquillian.org

mailto:devel@discuss.arquillian.org[Discuss Arquillian]
----
<1> The URL is automatically turned into a link. 
The trailing period will not get caught up in the link.
<2> To turn text into a link, enclose it in square brackets at the end of the URL.
<3> Quoted text formatting is available inside links.

====
http://asciidoc.org!

http://asciidoc.org[AsciiDoc]

https://github.com/asciidoctor[Asciidoctor @ *GitHub*]

devel@discuss.arquillian.org

mailto:devel@discuss.arquillian.org[Discuss Arquillian]
====

In addition to email addresses, Asciidoctor recognizes URLs that begin with:

* +$$http://$$+
* +$$https://$$+
* +$$ftp://$$+
* +$$irc://$$+
* +$$mailto:$$+

=== Link to relative files

If you want to link to a file relative to the current document, use the +link:+ macro in front of the file name.

[source]
link:editing-asciidoc-with-live-preview[Editing with Live Preview]

To link directly to a section in the document (a ``deep'' link), append a hash (`#`) followed by the id of the section to the end of the file name.

[source]
link:editing-asciidoc-with-live-preview/#livereload[LiveReload]

You can also create links that refer to sections within the current document.

.Relative
----
link:index.html[Docs]
----

====
link:index.html[Docs]
====

=== Target window and role attributes

You often need to set the target attribute on a link element (+<a>+) so the link opens in a new window (e.g., +<a href="..." target="_blank">+).

This type of configuration is normally specified using attributes.
However, AsciiDoc does not parse attributes in the link macro by default.
In Asciidoctor, you can enable parsing of link macro attributes by setting the +linkattrs+ document attribute in the header.

[source]
 :linkattrs:

You can then specify the name of the target window using the +window+ attribute:

[source]
http://google.com[Google, window="_blank"]

Since +_blank+ is the most common window name, we've introduced shorthand for it.
Just end the link text with a caret (+^+):

[source]
http://google.com[Google^]

CAUTION: If you use the caret syntax more than once in a single paragraph, you may need to escape the first occurrence with a backslash.
If the link text contains a comma, then you need to surround the link text in double quotes.

Since Asciidoctor is parsing the attributes, that opens the door for adding a role (i.e., CSS class) to the link:

[source]
http://google.com[Google^, role="external"]

.Link with attributes (Asciidoctor only)
[source]
----
http://discuss.asciidoctor.org[Discuss Asciidoctor, role="external", window="_blank"]

http://discuss.asciidoctor.org[Discuss Asciidoctor^]

http://search.example.com["Google, Yahoo, Bing^", role="teal"]
----

====
http://discuss.asciidoctor.org[Discuss Asciidoctor, role="big", window="_blank"]

http://discuss.asciidoctor.org[Discuss Asciidoctor^]

http://search.example.com["Google, Yahoo, Bing^", role="teal"]
====

NOTE: Links with attributes (including the subject and body segments on mailto links) are a feature unique to Asciidoctor.
To enable them, you must set the +linkattrs+ attribute on the document.
When they are enabled, you must quote the link text if it contains a comma.

=== Cross references

A link to another location in the current document is called a _cross reference_.
You create a cross reference by enclosing the element's id in double angled brackets:

[source]
The section <<content-is-king>> covers paragraphs in AsciiDoc.

In some backends, the text of the link will be automatically generated from the title of the element.
If you want to customize the linked text, include it after the id, separated by a comma:

[source]
Learn how to create <<content-is-king,paragraphs>> in AsciiDoc.

=== Inter-document references

In AsciiDoc, the xref inline macro is used to create a cross-reference (i.e., link) in the content of one section to the top of another section.
Asciidoctor 0.1.4 extends this functionality by allowing a link to be established to a section in another AsciiDoc document.
This eliminates the need to use direct links between documents that are coupled to a particular backend (e.g., HTML links).
It also captures the intent of the author to establish a reference to a section in another document.

Here's how an xref is normally defined in AsciiDoc:

```
Refer to <<section-b>> for more information.
```

This xref creates a link to a section with the id _section-b_.

Let's assume the xref is defined in the document [file]_document-a.adoc_.
If the target section is in a separate document, [file]_document-b.adoc_, the author may be tempted to write:

```
Refer to link:document-b.html#section-b[Section B] for more information.
```

However, this link is coupled to HTML output.
What's worse, if [file]_document-b.adoc_ is included in the same master as [file]_document-a.adoc_, then the link will refer to a document that doesn't even exist!

These problems can be alleviated by using an inter-document xref:

```
Refer to <<document-b.adoc#section-b,Section B>> for more information.
```

The id of the target is now placed behind a hash symbol (+#+).
Preceding the hash is the name of the reference document (the file extension is optional).
We've also added a label since Asciidoctor cannot (yet) resolve the section title in a separate document.

When Asciidoctor generates the link for this xref, it first checks to see if [file]_document-b.adoc_ is included in the same master as [file]_document-a.doc_.
If not, it will generate a link to [file]_document-b.html_, intelligently substituting the original file extension with the file extension of the output file.

```
<a href="document-b.html#section-b">Section B</a>
```

If [file]_document-b.adoc_ is included in the same master as [file]_document-a.doc_, then the document will be dropped in the link target and look like the output of a normal xref:

```
<a href="#section-b">Section B</a>
```

Now you can create inter-document references without the headache.

=== Summary

.Link attributes and values
[cols="1l,1,2,2"]
|===
|Attribute |Value(s) |Example Syntax |Comments

|linkattrs
|
|+:linkattrs:+
|Must be set in the header to parse link macro attributes.

|window
|blank
|$$http://discuss.asciidoctor.org[Discuss Asciidoctor, window="_blank"]$$
|The blank value can also be specified using +^+. Requires +linkattrs+.

|window
|$$^$$
|$$http://search.example.com["Google, Yahoo, Bing^"]$$ and $$http://discuss.asciidoctor.org[Discuss Asciidoctor^]$$
|Requires +linkattrs+.

|role
|CSS classes available to inline elements
|$$http://discuss.asciidoctor.org[Discuss Asciidoctor, role="teal"]$$
|Requires +linkattrs+.

|id
|name of element, custom link text
|$$<<section-titles,sections>>$$
|Applies to cross references
|===

== Images

To include an image on its own line (i.e., a _block image_), use the +image::+ prefix in front of the file name and square brackets after it.

[source]
image::sunset.jpg[]

If you want to specify alt text, include it inside the square brackets:

[source]
image::sunset.jpg[Sunset]

You can also give the image an id, a title, set its dimensions and make it a link.

[source]
----
[[img-sunset]] <1>
.A mountain sunset <2>
image::sunset.jpg[Sunset, 300, 200, link="http://www.flickr.com/photos/javh/5448336655"] <3> <4> <5>
----
<1> id
<2> The title of a block image is displayed underneath the image when rendered.
<3> The first positional attribute, _Sunset_, is the image's alt text.
<4> Image width and height
<5> +link=+ makes the image a link

.A hyperlinked image with caption
====
[[img-sunset]]
.A mountain sunset
image::sunset.jpg[Sunset, 300, 200, link="http://www.flickr.com/photos/javh/5448336655"]
====

If you want to include an image inline, use the +image:+ prefix instead (notice there is only one colon):

[source]
Press the image:save.png[Save, title="Save"] button.

For inline images, the optional title is displayed as a tooltip.

=== Set the images directory

Images are resolved relative to the value of the +imagesdir+ document attribute, which defaults to an empty value.
The +imagesdir+ attribute can be an absolute path, relative path or base URL.
If the image target is a URL or an absolute path, the +imagesdir+ prefix is _not_ added.

TIP: You should use the +imagesdir+ attribute to avoid hard coding the shared path to your images in every image macro.

==== Include images by full URL

Asciidoctor supports remote (i.e., images with a URL target) block and inline images.
You can reference images served from any URL (e.g., your blog, an image hosting service, your docs server, etc.) and never have to worry about downloading the images and putting them somewhere locally.

Here are a few examples of images that have a URL target:

.Block image with a URL target
[source]
----
imagesdir: ./images

image::http://inkscape.org/doc/examples/tux.svg[Tux,250,350]
----

.Inline image with a URL target
[source]
----
imagesdir: ./images

You can find image:http://inkscape.org/doc/examples/tux.svg[Linux,25,35] everywhere these days.
----

NOTE: The value of +imagesdir+ is ignored when the image target is a URI.

If you want to avoid typing the URL prefix for every image, and all the images are located on the same server, you can use the +imagesdir+ attribute to set the base URL:

.Using a URL as the base URL for images
[source]
----
:imagesdir: http://inkscape.org/doc/examples

image::tux.svg[Tux,250,350]
----

This time, the +imagesdir+ _is_ used since the image target is not a URL (the +imagesdir+ just happens to be one).

NOTE: This feature is included in the AsciiDoc compatibility file so that AsciiDoc gets it right too.

=== Put images in their place

Images are a great way to enhance the text, whether its to illustrate an idea, show rather than tell or just help the reader connect with the text.

Out of the box, images and text behave like oil and water.
Images don't like to share space with text.
They are kind of "pushy" about it.
That's why we focused on tuning the controls in the image macros so you can get the images and the text to flow together.

There are two approaches you can take when positioning your images:

. Named attributes
. Roles

==== Positioning attributes

Asciidoctor already supports the +align+ attribute on block images to align the image within the block (e.g., left, right or center).
In this release, we added the +float+ named attribute to both the block and inline image macros.
This attribute pulls the image to one side of the page or the other and wraps block or inline content around it, respectively.

Here's an example of a floating block image.
The paragraphs or other blocks that follow the image will float up into the available space next to the image.
The image will also be positioned horizontally in the center of the image block.

.A block image pulled to the right and centered within the block
[source]
----
image::tiger.png[Tiger,200,200,float="right",align="center"]
----

Here's an example of a floating inline image.
The image will float into the upper-right corner of the paragraph text.

.An inline image pulled to the right of the paragraph text
[source]
----
image:linux.png[Linux,150,150,float="right"]
You can find Linux everywhere these days!
----

When you use the named attributes, CSS gets added inline (e.g., +style="float: left"+).
That's bad practice because it can make the page harder to style when you want to customize the theme.
It's far better to use CSS classes for these sorts of things, which map to roles in AsciiDoc terminology.

==== Positioning roles

Here are the examples from above, now configured to use roles that map to CSS classes in the default Asciidoctor stylesheet:

.Image macros using positioning roles
[source]
----
[.right.text-center]
image::tiger.png[Tiger,200,200]

image:linux.png[Linux,150,150,role="right"]
You can find Linux everywhere these days!
----

The following table lists all the roles available out of the box for positioning images.

.Roles for positioning images
[cols="1h,5*^"]
|===
|{empty} 2+|Float 3+|Align

|Role
|left
|right
|text-left
|text-right
|text-center

|Block Image
|{y}
|{y}
|{y}
|{y}
|{y}

|Inline Image
|{y}
|{y}
|{n}
|{n}
|{n}
|===

Merely setting the float direction on an image is not sufficient for proper positioning.
That's because, by default, no space is left between the image and the text.
To alleviate this problem, we've added sensible margins to images that use either the positioning named attributes or roles.

If you want to customize the image styles, perhaps to customize the margins, you can provide your own additions to the stylesheet (either by using your own stylesheet that builds on the default stylesheet or by adding the styles to a docinfo file).

WARNING: The shorthand syntax for a role (+.+) can not yet be used with image styles.

==== Framing roles

It's common to frame the image in a border to further offset it from the text.
You can style any block or inline image to appear as a thumbnail using the +thumb+ role (or +th+ for short), also in the default stylesheet.

NOTE: The +thumb+ role doesn't alter the dimensions of the image.
For that, you need to assign the image a height and width.

Here's a very common example for adding an image to a blog post.
The image floats to the right and is framed to make it stand out more from the text.

```
image:logo.png[role="related thumb right"] Here's text that will wrap around the image to the left.
```

Notice we added the +related+ role to the image.
This role isn't technically required, but it gives the image semantic meaning.

==== Control the float

When you start floating images, you may discover that too much content is floating around the image.
What you need is a way to clear the float.
That is provided using another role, +float-group+.

Let's assume that we've floated two images so that they are positioned next to each other and we want the next paragraph to appear below them.

```
[.left]
.Image A
image::a.png[A,240,180]

[.left]
.Image B
image::b.png[B,240,180,title="Image B"]

Text below images.
```

When this example is rendered and viewed a browser, the paragraph text appears to the right of the images.
To fix this behavior, you just need to "group" the images together in a block with self-contained floats.
Here's how it's done:

[source]
----
[.float-group]
--
[.left]
.Image A
image::a.png[A,240,180]

[.left]
.Image B
image::b.png[B,240,180]
--

Text below images.
----

This time, the text will appear below the images where we want it.

=== Summary

.Block and inline image attributes and values
[cols="1m,1,2,2"]
|===
|Attribute |Value(s) |Example Syntax |Comments

|imagesdir
|empty, absolute path, relative path or base URL
|+:imagesdir: /file+
|If the image target is a URL or an absolute path, the +imagesdir+ prefix is _not_ added; Default is empty value

|id
|User defined text
|[[sunset-img]] or  +image::sunset.jpg["Sunset", id="sunset-img"]+
|

|alt
|User defined text in first position of attribute list or named attribute
|+image::sunset.jpg["Brilliant sunset"]+ or +image::sunset.jpg[align="left", alt="Sunset"]+
|

|title
|User defined text 
|+.A mountain sunset+ or +image::sunset.jpg["Sunset", title="A mountain sunset"]+
|Blocks: title displayed below image, Inline: title displayed as tooltip

|caption
|User defined text
|[caption="Figure 8: "]
|Insert below block title and above image macro; May only apply to block images

|width
|User defined size in pixels
|+image::sunset.jpg[Sunset, width="300"]+
|

|height
|User defined size in pixels
|+image::sunset.jpg[Sunset, height="200"]+
|

|link
|User defined location of external file
|+image::sunset.jpg[Sunset, link="http://www.flickr.com/photos/javh/5448336655"]+
|

|scaledwidth
|User defined percentage by which to scale image's width
|+image::sunset.jpg[Sunset, scaledwidth="25%"]+
|Only applies to block images rendered to DocBook and then converted to PDF

|scale
|TBD
|TBD
|DocBook only

|align
|left, center, right
|+image::sunset.jpg[Sunset, align="left"]+
|Block images only; Align and float attributes are mutually exclusive

|float
|left, right
|+image::sunset.jpg[Sunset, float="right"]+
|Block images only; float and align attributes are mutually exclusive; To stop a floating image, use +unfloat::[]+

|role
|left, right, th, thumb, related, rel
|+image::foo.png[role="thumb right"]+
|Inline images can use role to float images left and right; Role shorthand (+.+) can not be used on images
|===

== Video

The +video+ macro supports displaying videos stored relatively as well as externally.

```
video::video_file.mp4[]
```

You can control the video settings using additional attributes on the macro.
For instance, you can offset the start time of playback using the +start+ attribute and enable autoplay using the +autoplay+ option.

```
video::video_file.mp4[width=640, start=60, options=autoplay]
```

=== YouTube and Vimeo videos

The +video::[]+ macro supports videos from external video hosting services like YouTube and Vimeo.
To use this feature, put the video ID in the macro target and the name of the hosting service in the first positional attribute.
Asciidoctor will put the two together and generate the correct embed code to insert the video in the HTML output.

Here's an example that shows how to embed a YouTube video:

```
video::rPQoq7ThGAU[youtube, 640, 360]
```

and one that shows how to embed a Vimeo video:

```
video::67480300[vimeo, 400, 300]
```

=== Summary

.Video attributes and values
[cols="1m,1,2,2"]
|===
|Attribute |Value(s) |Example Syntax |Comments

|title
|User defined text 
|+.An ocean sunset+
|

|poster
|User defined URL or file of an image
|+video::ocean_sunset.mp4[poster="sunset.jpg"]+
|

|width
|User defined size in pixels
|+video::ocean_sunset.mp4[width="400"]+
|

|height
|User defined size in pixels
|+video::ocean_sunset.mp4[height="400"]+
|

|options
|autoplay, loop, controls, nocontrols
|+video::ocean_sunset.mp4[options="loop"]+
|The controls value is enabled by default
|===

== Audio

NOTE: Pending

////
Macro name:

 audio::ocean_waves.mp3[options="loop]"
////

=== Summary

.Audio attributes and values
[cols="1,1,2,2"]
|===
|Attribute |Value(s) |Example Syntax |Comments

|options
|autoplay, loop, controls, nocontrols
|+audio::ocean_waves.mp3[options="autoplay,loop"]+
|The controls value is enabled by default
|===



== Admonition

There are certain statements that you might want to draw attention to by taking them out of the flow and labeling them with a priority.
These are called admonition blocks.

Asciidoctor provides five admonition labels:

* Tip
* Note
* Important
* Warning
* Caution

Admonitions are created either by prefixing the label to a paragraph or applying the label as a style attribute to a delimited block.

.Admonition paragraph
[source]
----
NOTE: The label must be UPPERCASE. 
----

.Admonition block
[source]
----
[NOTE]
==== <1>
This is an example of an admonition block.

Unlike an admonition paragraph, it may contain any AsciiDoc content.
The style can be any one of the admonition labels:

* NOTE
* TIP
* WARNING
* CAUTION
* IMPORTANT
====
----
<1> This is an example block acting as an admonition.

An admonition is rendered in a callout box with the admonition label--or its corresponding icon--in the gutter.
Icons are enabled by setting the +icons+ attribute on the document.

== Sidebar

.Sidebar
[source]
----
.AsciiDoc history
****
AsciiDoc was first released in Nov 2002 by Stuart Rackham.
It was designed from the start to be a shorthand syntax
for producing professional documents like DocBook and LaTeX.
****
----

====
.AsciiDoc history
****
AsciiDoc was first released in Nov 2002 by Stuart Rackham.
It was designed from the start to be a shorthand syntax
for producing professional documents like DocBook and LaTeX.
****
====

== Example

.Example
----
.Sample document
====
Here's a sample AsciiDoc document:

[listing]
....
= AsciiDoc Writer's Guide
Dan Allen
:toc:

This guide provides...
....

The document header is useful, but not required.
====
----

--
.Sample document
====
Here's a sample AsciiDoc document:

[listing]
....
= AsciiDoc Writer's Guide
Dan Allen
:toc:

This guide provides...
....

The document header is useful, but not required.
====
--

== Quote

Block quotes have three parts (quoted text, attribution and source):

----
[quote,  attribution pa, citetitle pa]
----

.Quote paragraph
----
[quote, attribution pa, citetitle pa]
Quote here
----

.Quote delimited block
[source]
----
[quote, Thomas Jefferson, Papers of Thomas Jefferson: Volume 11]
____
I hold it that a little rebellion now and then is a good thing,
and as necessary in the political world as storms in the physical.
____
----

Asciidoctor also provides three alternative ways to markup quotes.

=== Quoted paragraph

You can turn a single paragraph into a blockquote by:

a. surrounding it with double quotes
b. adding an optional attribution (prefixed with two dashes) below the quoted text.

[source]
----
"I hold it that a little rebellion now and then is a good thing,
and as necessary in the political world as storms in the physical."
-- Thomas Jefferson, Papers of Thomas Jefferson: Volume 11
----

Here's the result of the abbreviated blockquote syntax:

"I hold it that a little rebellion now and then is a good thing,
and as necessary in the political world as storms in the physical."
-- Thomas Jefferson, Papers of Thomas Jefferson: Volume 11

=== Air quotes

{air-ref}[Air quotes^] are two double quotes on each line, emulating the gesture of making quote marks with two fingers on each hand.

[source]
----
[, Richard M. Nixon]
""
When the President does it, that means that it's not illegal.
""
----

=== Markdown-style blockquotes

Asciidoctor supports Markdown-style blockquotes:

[source]
----
> I hold it that a little rebellion now and then is a good thing,
> and as necessary in the political world as storms in the physical.
> -- Thomas Jefferson, Papers of Thomas Jefferson: Volume 11
----

This markup renders the same as the example above.

Like Markdown, Asciidoctor supports block content inside the blockquote, including nested blockquotes:

[source,markdown]
.Markdown-style blockquote containing block content
....
> > What's new?
>
> I've got Markdown in my AsciiDoc!
>
> > Like what?
>
> * Blockquotes
> * Headings
> * Fenced code blocks
>
> > Is there more?
>
> Yep. AsciiDoc and Markdown share a lot of common syntax already.
....

Here's how this conversation renders:

> > What's new?
>
> I've got Markdown in my AsciiDoc!
>
> > Like what?
>
> * Blockquotes
> * Headings
> * Fenced code blocks
>
> > Is there more?
>
> Yep. AsciiDoc and Markdown share a lot of common syntax already. Just try it.

== Verse

A verse block preserves line breaks and styles any added author and title text.

Verses are defined by the +verse+ attribute or the +____+ line delimiter.

.Verse paragraph
----
[verse, attribution pa, citetitle pa]
Poetry here
----

.Verse delimited block
----
____
Poetry here
____
----

== Comments

.Line
----
// A single-line comment.
----

TIP: Single-line comments can be used to divide elements, such as two adjacent lists.

.Block
----
////
A multi-line comment.

Notice it's a delimited block.
////
----

= Controlling Your Content

NOTE: Part introduction pending

== Text Substitutions

Text substitution elements replace characters, markup, attribute references, and macros with backend specific styles and values.
When Asciidoctor processes a document it uses a set of six text substitution elements. 
The processor runs the text substitution elements in the following order.

. Special characters
. Quotes
. Attribute references
. Replacements
. Inline macros
. Post replacements

In turn, these substitutions are organized into composite value groups.
The table below shows which substitution elements are included in each group.

.Substitution groups
[cols="2h,6*^"]
|===
|Group    |Special characters |Quotes |Attributes |Replacements |Macros |Post replacements 
          
|Header   |{y}                |{n}    |{y}        |{n}          |{n}    |{n}              
|None     |{n}                |{n}    |{n}        |{n}          |{n}    |{n}               
|Normal   |{y}                |{y}    |{y}        |{y}          |{y}    |{y}               
|Pass     |{n}                |{n}    |{y}        |{n}          |{y}    |{n}               
|Title    |{y}                |{y}    |{y}        |{y}          |{y}    |{y}               
|Verbatim |{y}                |{n}    |{n}        |{n}          |{n}    |{n}               
|===

By default, the +normal+ substitution group is applied to most block and inline elements.
However, there are a few exceptions.

The +header+ substitution group is applied to the header of your document.
In the header, only special characters and attribute references are replaced.

Fenced, literal, listing, and source blocks are processed with the +verbatim+ substitution group.
Only special characters are replaced in these blocks.

The +pass+ substitution group can only be applied to block passthrough elements.
Attribute references and macros are replaced in passthroughs.

The +title+ substitution group includes the same text substitutions as the +normal+ group.
However, the order that the substitutions are executed is slightly different.
Text substitutions are applied to titles in the following sequence:

. Special characters
. Quotes
. Replacements
. Inline macros
. Attribute references
. Post replacements

The +none+ substitution group is applied to comment blocks.

=== Special characters

When applicable, the first text substitution to occur is the replacement of any special characters.
This process is handled by the +specialcharacters+ element.
The +specialcharacters+ element searches for three characters (+<+, +>+, +&+) and replaces them with their <<char-ref-sidebar,character entity references>>.

* The less than symbol, +<+, is replaced with the +&lt;+ character entity reference.
* The greater than symbol, +>+, is replaced with the +&gt;+ character entity reference.
* An ampersand, +&+, is replaced with the +&amp;+ character entity reference.

By default, +specialcharacters+ substitution occurs on all inline and block elements except for comments and certain passthroughs.

[NOTE]
====
Special character substitution precedes attribute substitution, so you will need to manually escape any attributes containing special characters that you set in the CLI or API.
For example, on the command line, type +$$-a toctitle="Sections, Tables &amp; Figures"$$+ instead of +$$-a toctitle="Sections, Tables & Figures"$$+.
====

=== Quotes

The +quotes+ substitution replaces the formatting markup on inline elements.

For example, when a document is rendered to HTML, any asterisks enclosing text are replaced with +<strong>+ HTML tags.

.Syntax input
----
Happy werewolves are *really* slobbery.
----

.HTML output
----
Happy werewolves are <strong>really</strong> slobbery.
----

The following table shows the markup syntax that is replaced by the +quotes+ substitution process.

.HTML tags that replace AsciiDoc markup syntax
[cols="3,^3,^4l"]
|===
|Name                |Syntax  |Tag

|emphasis            |$$_word_$$   |<em>word</em>
|strong              |$$*word*$$   |<strong>word</strong>
|monospaced          |$$+word+$$   |<code>word</code>
|superscript         |$$^word^$$   |<sup>word</sup>
|subscript           |$$~word~$$   |<sub>word</sub>
|double smart quotes |$$`word'$$   |\&#8220;word\&#8221;
|single smart quotes |$$``word''$$ |\&#8216;word\&#8217;
|===

The +quotes+ substitution occurs on formatted text within title, paragraph, example, quote, sidebar, and verse blocks.

.Elements subject to +quotes+ text substitution
[width="40%", cols="3,^2"]
|===
|Element | +quotes+ substitution

|Attribute value |{n}

|Comment |{n}

|Example |{y}

|Fenced |{n}

|Header |{n}

|Literal |{n}

|Listing |{n}

|Macro |{y}

|Open |Varies

|Paragraph |{y}

|Passthrough |{n}

|Quote |{y}

|Sidebar |{y}

|Source |{n}

|Special sections |{y}

|Table |Varies

|Title |{y}

|Verse |{y}

|===

=== Attributes

Attribute references are replaced with their values when they're processed by the +attributes+ substitution.

.Elements subject to +attributes+ text substitution
[width="40%", cols="3,^2"]
|===
|Element | +attributes+ substitution

|Attribute value |{y}

|Comment |{n}

|Example |{y}

|Fenced |{n}

|Header |{y}

|Literal |{n}

|Listing |{n}

|Macro |{y}

|Open |Varies

|Paragraph |{y}

|Passthrough |{n}

|Quote |{y}

|Sidebar |{y}

|Source |{n}

|Special sections |{y}

|Table |Varies

|Title |{y}

|Verse |{y}

|===

=== Replacements

The +replacements+ substitution processes textual characters such as marks, arrows and dashes and replaces them with the decimal format of their Unicode code point, i.e. their <<char-ref-sidebar,numeric character reference>>.

[cols="2,^1l,^1l,^1,2"]
.Textual symbol replacements
|===
|Name |Syntax |Unicode Replacement |Rendered |Notes

|Copyright
|\(C)
|\&#169;
|(C)
|

|Registered
|\(R)
|\&#174;
|(R)
|

|Trademark
|\(TM)
|\&#8482;
|(TM)
|

|Em dash
|\--
|\&#8212;
|{empty}--{empty}
|When space is detected on either side of the em dash, the thin space numeric character entity (+\&#8201;+) is also substituted into the document.

|ellipses
|\...
|\&#8230;
|...
|

|right single arrow
|\->
|\&#8594;
|->
|

|right double arrow
|\=>
|\&#8658;
|=>
|

|left single arrow
|\<-
|\&#8592;
|<-
|

|left double arrow
|\<=
|\&#8656;
|<=
|

|apostrophe
|Sam\'s
|Sam\&#8217;s
|Sam's
|The vertical form apostrophe is replaced with the curved form apostrophe.

|===

WARNING: The +replacements+ element depends on the substitutions completed by the +specialcharacters+ element.
This is important to keep in mind when applying custom substitutions to a block.
See the section about <<applying-substitutions,applying custom substitutions>> for more information.

The +replacements+ substitution also recognizes {xml-ref}[HTML and XML character entity references] as well as {unicode-ref}[decimal and hexadecimal Unicode code points] and substitutes them for their corresponding decimal form Unicode code point.

For example, to render the +&sect;+ symbol you could write +\&sect;+, +\&#x00A7;+, or +\&#167;+.
When the document is processed, +replacements+ will replace the section symbol reference, regardless of whether it is a character entity reference or a numeric character reference, with +\&#167;+.
In turn, +\&#167;+ will render as +&sect;+.

[[char-ref-sidebar]]
.Anatomy of a character entity reference and a numeric character reference
****

A character reference is a standard sequence of characters that is substitued for a single character when Asciidoctor processes a document.
There are two types of character references: character entity references and numeric character references.

A character entity reference is the name of an entity which refers to a character.
The name must be prefixed with an ampersand (+{amp}+) and end with a semicolon (+;+).

For example:

* +\&dagger;+ renders as &dagger;
* +\&euro;+ renders as &euro;
* +\&loz;+ renders as &loz;

Numeric character references are the decimal or hexadecimal Universal Character Set/Unicode code points which refer to a character.

* The decimal code point references are prefixed with an ampersand (+{amp}+), followed by a hash (+&#35;+), and end with a semicolon (+;+).
* Hexadecimal code point references are prefixed with an ampersand (+{amp}+), followed by a hash (+&#35;+), followed by a lowercase +x+, and end with a semicolon (+;+).

For example:

* +\&#x2020;+ or +\&#8224;+ render as &#8224;
* +\&#x20AC;+ or +\&#8364;+ render as &#8364;
* +\&#x25CA;+ or +\&#9674;+ render as &#x25CA;

Developers may be more familiar with using *Unicode escape sequences* to perform text substitutions.
For example, to render an +&#64;+ sign using a Unicode escape sequence, you would prefix the hexadecimal Unicode code point with a backslash (+\+) and an uppercase or lowercase +u+, i.e. +u0040+.
However, Asciidoctor doesn't process and replace Unicode escape sequences at this time.

****
 
TIP: Asciidoctor also provides numerous built-in attributes for representing characters and symbols.
These attributes and their corresponding output are listed in <<appendix2#char-ref-table,Appendix B>>.

The +replacements+ substitution occurs within title, paragraph, example, quote, sidebar, and verse blocks.

.Elements subject to +replacements+ text substitution
[width="40%", cols="3,^2"]
|===
|Element | +replacements+ substitution

|Attribute value |{n}

|Comment |{n}

|Example |{y}

|Fenced |{n}

|Header |{n}

|Literal |{n}

|Listing |{n}

|Macro |{y}

|Open |Varies

|Paragraph |{y}

|Passthrough |{n}

|Quote |{y}

|Sidebar |{y}

|Source |{n}

|Special sections |{y}

|Table |Varies

|Title |{y}

|Verse |{y}

|===

=== Macros

Macros are processed by the +macros+ element.
The +macros+ substitution replaces a macro's content with the appropriate built-in and user-defined configuration.

.Elements subject to +macros+ substitution
[width="40%", cols="3,^2"]
|===
|Element | +macros+ substitution

|Attribute value |{y}

|Comment |{n}

|Example |{y}

|Fenced |{n}

|Header |{y}

|Literal |{n}

|Listing |{n}

|Macro |{y}

|Open |Varies

|Paragraph |{y}

|Passthrough |{y}

|Quote |{y}

|Sidebar |{y}

|Source |{n}

|Special sections |{y}

|Table |Varies

|Title |{y}

|Verse |{y}

|===

=== Post replacements

The line break character, +{plus}+, is replaced when the +post_replacements+ process runs.

.Elements subject to +post_replacements+ text substitution
[width="40%", cols="3,^2"]
|===
|Element | +post_replacements+ substitution

|Attribute value |{y}

|Comment |{n}

|Example |{y}

|Fenced |{n}

|Header |{y}

|Literal |{n}

|Listing |{n}

|Macro |{y}

|Open |Varies

|Paragraph |{y}

|Passthrough |{n}

|Quote |{y}

|Sidebar |{y}

|Source |{n}

|Special sections |{y}

|Table |Varies

|Title |{y}

|Verse |{y}

|===

=== Applying substitutions

Specific substitution elements can be applied to block and inline elements by setting the +subs+ attribute.
The +subs+ attribute can be assigned a comma separated list of the following substitution elements and groups.

[horizontal]
+none+:: Disables substitutions

+normal+:: Performs all substitutions except for callouts

+verbatim+:: Replaces special characters and processes callouts

+specialcharacters+:: Replaces +<+, +>+, and +&+ with their corresponding entities

+quotes+:: Applies text formatting

+attributes+:: Replaces attribute references

+replacements+:: Substitutes textual and character reference replacements

+macros+:: Processes macros

+post_replacements+:: Replaces the line break character (+{plus}+)

Let's look at an example where you only want to process the special characters, formatting markup, and callouts in a literal block.
Normally, literal blocks are only subject to special characters substitution.
But you can change this behaviour by setting the +subs+ attribute in the block's attribute list.

....
[source,java]
[subs="verbatim,quotes"] <1>
----
System.out.println("Hello *bold* text"). <2>
----
....
<1> The +subs+ attribute is set in the attribute list and assigned the +verbatim+ and +quotes+ values.
<2> The formatting markup in this line will be replaced when the +quotes+ substiution element runs.

====
[source,java]
[subs="verbatim,quotes"]
----
System.out.println("Hello *bold* text"). <1> <2>
----
====
<1> The +verbatim+ value enables the callouts to be rendered.
<2> The +quotes+ value enables the text formatting to be rendered.


NOTE: More examples are pending. Information about the callouts substitution also needs to be included here.

[TIP]
====
If you are applying the same set of substitutions to numerous blocks, you should consider making them an attribute on the document to ensure consistency.

----
:markup-in-source: verbatim,quotes

[source,java]
[subs="{markup-in-source}"]
----
System.out.println("Hello *bold* text").
----
----

Another way to ensure consistency and keep your documents clean and simple is to use the <<treeprocessor-example,Treeprocessor extension>>.
====

=== Preventing substitutions

Asciidoctor provides several approaches for preventing substitutions.

.Backslash escaping

To prevent punctuation from being interpreted as formatting markup, proceed it with a backslash (+{backslash}+).
This is also how you can prevent character and attribute references from substitution.
When your document is processed, the backslash is removed so it doesn't display in your output.

[source]
----
\*Stars* will not be bold, but rather appear as *Stars*.

\&sect; will not be replaced with the &sect; symbol.

\{two-semicolons} attribute reference will not be replaced with ;;.
----

====
\*Stars* will not be bold, but rather appear as \*Stars*.

\&sect; will not be replaced with the &sect; symbol.

\{two-semicolons} attribute reference will not be replaced with ;;.
====

You can also prevent substitutions with <<macro-and-block-passthroughs,macro and block passthroughs>>.

== Literal Text and Blocks

Literal blocks display text exactly as it is entered.
Only special characters and callouts are replaced in the text.

Literal blocks are defined three ways:

. Indenting the first line of a paragraph by one or more spaces
. Applying the +literal+ attribute 
. Using the +\....+ line delimiter

.Implicit
----
 This text will be displayed exactly as I enter it.
----

.Literal paragraph
----
[literal]
This text will be displayed exactly as I enter it.
----

.Literal delimited block
----
....
This text will be displayed exactly as I enter it.
....
----

== Listing and Source Code Blocks

You've already seen many examples of the listing block (i.e., code block), which is surrounded by lines with four hyphens.
Since a listing block is typically used for source code, substitutions are not desirable, therefore only special characters and callouts are replaced in the text.

[source]
....
----
This is an example of a _listing block_.
The content inside is rendered as <pre> text.
----
....

Here's how the block above appears when rendered as HTML:

....
This is an example of a _listing block_.
The content inside is rendered as <pre> text.
....

You should notice a few things about how the content is processed:

* the HTML tag +<pre>+ is escaped
* then endlines are preserved
* the phrase ``listing block'' is not italicized, despite having underscores around it.

[listing]
.Custom substitutions
....
:version: 0.1.3

[source,xml]
[subs="verbatim,attributes"]
----
<dependency>
  <groupId>org.asciidoctor</groupId>
  <artifactId>asciidoctor-java-integration</artifactId>
  <version>{version}</version>
</dependency>
----
....

=== To wrap or to scroll

Previously, the Asciidoctor stylesheet was configured to prevent line wrapping (e.g., +white-space: pre-wrap; word-wrap: normal+) in listing and literal blocks.
This behavior isn't always desirable because it causes the browser window to scroll if the content overflows the width of the page.
For many, this horizontal scrolling is considered a greater readability problem than line wrapping.

Since there are two camps on this preference, neither setting will please both.
For that reason, we've made this behavior configurable in Asciidoctor 0.1.4.

By default, the default Asciidoctor stylesheet now wraps long lines in listing and literal blocks by applying the CSS +white-space: pre-wrap+ and +word-wrap: break-word+.
The lines are wrapped at word boundaries, similar to how most text editors wrap lines.

There are two ways to prevent lines from wrapping so that horizontal scrolling is used instead:

* nowrap block option
* prewrap document attribute

You can use the +nowrap+ option on literal or listing blocks to prevent lines from being wrapped in the HTML:

```
[source, java, options="nowrap"]
----
public class ApplicationConfigurationProvider extends HttpConfigurationProvider
{
   @Override
   public Configuration getConfiguration(ServletContext context)
   {
      return ConfigurationBuilder.begin()
               .addRule()
               .when(Direction.isInbound().and(Path.matches("/{path}")))
               .perform(Log.message(Level.INFO, "Client requested path: {path}"))
               .where("path").matches(".*");
   }
}
----
```

When the +nowrap+ option is used, the +nowrap+ class is added to the +<pre>+ element.
This class changes the CSS to +white-space: pre+ and +word-wrap: normal+.

To apply the nowrap option globally, just set the +prewrap+ attribute on the document.

```
:prewrap:
```

When the +prewrap+ attribute is set, the +nowrap+ class is added to any +<pre>+ element even when the +nowrap+ option is absent.

Now, you can use the line wrapping strategy that works best for you and your readers.

=== Summary

NOTE: Pending

== Macro and Block Passthroughs

Passthroughs are the "anything goes" mechanism in Asciidoctor.
As its name implies, a passthrough passes its contents directly to the output document.
The contents of a passthrough are excluded from <<text-substitutions,substitutions>>.

WARNING: Using a passthrough couples your document to a specific output format, such as HTML.
You can use conditional inclusion macros to declare passthrough markup for each of the backends you need to support.

=== Passthrough macros

The passthrough macro can be applied to inline or block content.
Asciidoctor provides several ways to write a passthrough macro.

.Pass macro

The +pass+ macro can be applied to inline or block content.
You can include a comma-seperated list of substitutions prior to the passthrough content.

.Inline pass macro
 pass:optional-substitution-attribute-1,optional-substitution-attribute-x[content passed directly to the output] followed by normal content.
 
.Block pass marco
 pass::optional-substitution-attribute-1,optional-substitution-attribute-x[content passed directly to the output]
 
To exclude a phrase from substitutions and disable escaping of special characters, enclose it in the inline +$$pass:[]$$+ macro:

[source]
----
The markup pass:[<u>underline me</u>] renders as underlined text.
----

====
The markup pass:[<u>underline me</u>] renders as underlined text.
====

If you want to enable ad-hoc +quotes+ substitution, then assign the +macros+ value to +subs+ and use the inline +pass:[]+ macro.

....
[subs="verbatim,macros"] <1>
----
I better not be *bold* or _italic_.
pass:quotes[But I should be *bold* text] <2>
----
....
<1> +macros+ is assigned to +subs+, which allows any macros within the block to be processed.
<2> The +pass:[]+ macro is assigned the +quotes+ value. Text within the square brackets will be formatted.

The inline +pass:[]+ macro does introduce additional markup into the Java source code that makes it invalid in raw form, but the output it produces will be valid when viewed in a viewer (HTML, PDF, etc).

====
[subs="verbatim,macros"]
----
I better not contain *bold* or _italic_ text.
pass:quotes[I should contain *bold* text]
----
====

////
<1> +macros+ is assigned to +subs+, which allows any macros within the block to be processed.
<2> The +pass:[]+ macro is assigned the +quotes+ value. Textwithin the square brackets will be formatted.

// The markup pass:[<u>underline me</u>] produces the same result.
////

.Triple-plus passthrough

The triple-plus passthrough works the same way as the +pass+ macro.
To exclude content from substitutions, enclose it in triple pluses (+$$+++$$+).

 +++content passed directly to the output+++ followed by normal content.

The triple-plus macro is often used to output custom HTML or XML.

[source]
----
The markup +++<u>underline me</u>+++ renders as underlined text.
----

====
The markup +++<u>underline me</u>+++ renders as underlined text.
====

.Double-dollar passthrough

The double-dollar passthrough behaves like the triple-plus passthrough, but it allows <<special-characters,special characters>> in its content to be replaced.
Passthrough content is enclosed by double dollar signs (+$$+).

 $$Content passed directly to the output$$ followed by normal content.

[source]
----
$$*Stars*$$ will not be bold.
----

====
$$*Stars*$$ will not be bold.
====

.Backtick passthrough

Content enclosed in a backtick passthrough is subject to <<special-characters,special characters>> substition and displayed as monospace text.

 `Content in a line that is passed directly to the output` followed by normal content.


Backticks (+`+) are commonly used around inline code containing markup.

[source]
----
This java code: `System.out.println("No *bold* here");` will appear in a monospace font but without any other text formatting.
----

====
This java code: `System.out.println("No *bold* here");` will appear in a monospace font but without any other text formatting.
====

////

This section is not valid until Issue #720 is corrected.

==== Nesting blocks and passthrough macros

When you're using passthroughs inside literal and listing blocks, it can be easy to forget that the triple-plus, double-dollar, and backtick passthroughs are macros.
If you want to enable the passthroughs, make sure to assign the +macros+ value to the +subs+ attribute.

....
[source,java]
[subs="verbatim,quotes,macros"]
----
protected void configure(HttpSecurity http) throws Exception {
    http
        .authorizeRequests()
            **.antMatchers("/resources/$$**$$").permitAll()**
            .anyRequest().authenticated()
            .and()
        .formLogin()
            .loginPage("/login")
            .permitAll();
----
....

====
[source,java]
[subs="verbatim,quotes,macros"]
----
protected void configure(HttpSecurity http) throws Exception {
    http
        .authorizeRequests()
            **.antMatchers("/resources/$$**$$").permitAll()**
            .anyRequest().authenticated()
            .and()
        .formLogin()
            .loginPage("/login")
            .permitAll();
----
====

////

=== Block passthroughs

A block passthrough is delimited by four plus signs (+{plus}{plus}{plus}{plus}+).
By default, a passthrough block is subject to the +attributes+ and +macros+ substitution elements.

[source]
----
++++
<video poster="images/movie-reel.png">
  <source src="videos/writing-zen.webm" type="video/webm">
</video>
++++
----

NOTE: More examples pending.

////

When you don't want any substituions to occur, you can apply the special +pass+ style to the passthrough block.

Need example.

You can also apply a custom set of substitutions to a passthrough block using the +subs+ attribute.

// Need example.

The block style can be used in the absence of block delimiters to promote a paragraph to a block element.

//// 

== Open Blocks

The most versatile block of all is the open block.
An open block can act as any other block, with the exception of _pass_ and _table_.
Here's an example of an open block acting as a sidebar:

//[source]
----
[sidebar]
.Related information
--
This is aside text.

It is used to present information related to the main content.
--
----

[sidebar]
.Related information
--
This is aside text.

It is used to present information related to the main content.
--

.Open
----
--
An open block can be an anonymous container,
or it can masquerade as any other block.
--

[source]
--
puts "I'm a source block!"
--
----

====
--
An open block can be an anonymous container,
or it can masquerade as any other block.
--

[source]
--
puts "I'm a source block!"
--
====

= Enriching Your Content

NOTE: Part introduction pending

== User Interface Macros

IMPORTANT: You *must* set the +experimental+ attribute to enable these macros.

=== Keyboard shortcuts

Asciidoctor recognizes a macro for creating keyboard shortcuts using the syntax `kbd:[key(+key)*]`.

For example:

.Common browser keyboard shortcuts
[width="50%"]
|===
|Shortcut |Purpose

|kbd:[F11]
|Toggle fullscreen

|kbd:[Ctrl+T]
|Open a new tab

|kbd:[Ctrl+Shift+N]
|New incognito window

|kbd:[Ctrl + +]
|Increase zoom
|===

You no longer have to struggle to explain to users what keys they are supposed to press.

=== Menu selections

Trying to explain to someone how to select a menu item can be a pain.
With the +menu+ macro, the symbols do the work.

For example:

----
To save the file, select menu:File[Save].

Select menu:View[Zoom > Reset] to reset the zoom level to the default setting.
----

The instructions in the example above appear as:

====
To save the file, select menu:File[Save].

Select menu:View[Zoom > Reset] to reset the zoom level to the default setting.
====

=== UI buttons

It can be equally difficult to communicate to the reader that they need to press a button.
They can't tell if you are saying ``OK'' or they are supposed to look for a button labeled "OK".
It's all about getting the semantics right.
The +btn+ macro to the rescue!

For example:

----
Press the btn:[OK] button when you are finished.

Select a file in the file navigator and click btn:[Open].
----

Here's the result:

====
Press the btn:[OK] button when you are finished.

Select a file in the file navigator and click btn:[Open].
====

We are looking for feedback on these macros before setting them in stone.
If you have suggestions, we want to hear from you!

== Icons

Asciidoctor provides a number of ways to display icons in a document.
The default stylesheet includes admonition and callout icons for the admonition and callout blocks, but you can also specify custom icons.
Additionally, Asciidoctor can "draw" icons using the {fontawesome-ref}[Font Awesome^] font-based icon set.
You can see the icon name options on the {fontawesome-ref}/icons/[icons page]. 

// Support for other icon sets is being discussed in issue [#539].

When you aren't using font-based icons, or you are using the DocBook backend, the icon set is limited to which icons you have in your +iconsdir+ directory.

=== Admonition icons

To use this feature, set the value of the +icons+ document attribute to +font+.
Asciidoctor will then emit HTML markup that selects an appropriate font character from the Font Awesome font for each admonition block.

Here's an example, starting with the AsciiDoc source:

[source]
----
= Document Title
:icons: font

NOTE: Asciidoctor supports font-based admonition icons, powered by Font Awesome!
----

the HTML it produces:

[source,html]
----
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
Asciidoctor supports font-based admonition icons, powered by Font Awesome!
</td>
</tr>
</table>
</div>
----

This is how the admonition looks rendered:

NOTE: Asciidoctor supports font-based admonition icons, powered by Font Awesome!

Asciidoctor adds a reference to the Font Awesome stylesheet and font files served from a CDN to the document header:

[source,html]
----
<link rel="stylesheet"
  href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.1.0/css/font-awesome.min.css">
----

IMPORTANT: The default stylesheet (or any stylesheet produced by the {factory-ref}[Asciidoctor stylesheet factory]) is required for this feature to work.

=== Inline icons

Asciidoctor 0.1.4 introduced an inline macro for inserting an icon at an arbitrary place in paragraph content. 

Here's an example that inserts a tags icon in front of a list of tag names:

[source]
----
icon:tags[] ruby, asciidoctor
----

Here's how this example renders in the HTML backed when the +icons=font+ attribute is set:

[source,html]
----
<div class="paragraph">
<p><i class="icon-tags"></i> ruby, asciidoctor</p>
</div>
----

More importantly, here's how it _looks!_

icon:tags[] ruby, asciidoctor

You can even give the icon color by assigning it a role:

[source]
----
icon:tags[role="blue"] ruby, asciidoctor
----

which appears as:

icon:tags[role="blue"] ruby, asciidoctor

If you aren't using the font-based icons, Asciidoctor looks for the images on disk, in the +iconsdir+, naturally.
Here's how it renders in the HTML backend when the +icons+ attribute is not set or empty:

[source,html]
----
<div class="paragraph">
<p><span class="image"><img src="./images/icons/tags.png" alt="tags"></span> ruby, asciidoctor</p>
</div>
----

Here's how it renders in the DocBook backend, regardless of the +icons+ attribute value:

[source,xml]
----
<inlinemediaobject>
  <imageobject>
    <imagedata fileref="./images/icons/tags.png"/>
  </imageobject>
  <textobject><phrase>tags</phrase></textobject>
</inlinemediaobject> ruby, asciidoctor
----

.Relationship to the inline image macro
The inline icon macro is similar to the inline image macro with a few exceptions:

* If the +icons+ attribute has the value +font+, the macro will translate to a font-based icon in the HTML backend (e.g., +<i class="icon-tags"></i>+)
* If the +icons+ attribute does not have the value +font+, or the backend is DocBook, the macro will insert an image into the document that resolves to a file in the +iconsdir+ directory (e.g., +<img src="./images/icons/tags.png">+)

The file resolution strategy when using image-based icons is the same used to locate images for the admonition icons. The file extension is set using the +icontype+ attribute, which defaults to +png+.

==== Size, rotate, and flip

The icon macro has a few attributes that can be used to modify the size and orientation of the icon. At the moment, these are specific to Font Awesome and therefore only apply to HTML output when icon fonts are enabled.

* size (first positional attribute) - scales the icon; possible values: large, 2x, 4x
* rotate - rotates the icon: possible values: 90, 180, 270
* flip - flips the icon: possible values: horizontal, vertical

The first unnamed attribute is assumed to be the size. For instance, to make the icon twice the size as the default, simply add `2x` inside the square brackets.

    icon:heart[2x]

This is equivalent to:

    icon:heart[size=2x]

And this is how the icon:heart[size=2x] displays.

The previous example emits the following HTML:

    <i class="icon-heart icon-2x"></i>

To rotate and flip the icon, specify these options using attributes:

    icon:shield[rotate=90, flip=vertical]

The icon:shield[rotate=90, flip=vertical] looks like this.

The previous example emits the following HTML:

   <i class="icon-shield icon-rotate-90 icon-flip-vertical"></i>

NOTE: This markup is subject to change. In particular, the `<i>` element may be replaced with the `<span>` element.

==== Link and window

Like an inline image, it's possible to add additional metadata to an inline icon.

Below are the possible attributes that apply to both font-based and image-based icons:

* link - The URI target used for the icon, which will be rendered as a link
* window - The target window of the link (when the `link` attribute is specified) (HTML backend)

Here's an example of an icon rendered as a link:

    icon:download[link="http://rubygems.org/downloads/asciidoctor-0.1.3.gem"]

The previous example emits the following HTML:

    <a class="image" href="http://rubygems.org/downloads/asciidoctor-0.1.3.gem"><i class="icon-download"></i></a>

==== Regular icon attributes

Below are the possible attributes that apply in the case that font-based icons are *not* in use:

* alt - The alternate text on the `<img>` tag (HTML backend) or text for `<inlinemediaobject>` (DocBook backend)
* width - The width applied to the image
* height - The height applied to the image
* title - The title of the image displayed when the mouse hovers over it (HTML backend)
* role - The role applied to the element that surrounds the icon

Currently, the inline icon macro doesn't support any options to change it's physical position (such as alignment left or right).

== Callouts

NOTE: Pending

=== Callouts don't get caught in copy

In versions prior to Asciidoctor 0.1.4, when a reader visiting an HTML page generated by Asciidoctor selected source code from a listing that contained callouts and copied it, the callout numbers would get caught up in the copy.
If the reader pasted that code and tried to run it, likely the extra characters from the callouts caused compile or runtime errors.

Asciidoctor uses CSS to prevent callouts from being selected.

On the other side of the coin, you don't want the callout annotations or CSS messing up your raw source code either.
You can tuck your callouts neatly inside line comments.
Asciidoctor will recognize the line comments characters in front of a callout number, optionally offset by a space, and remove them when rendering the document.

Here are the line comments that are supported:

[source]
....
----
line of code  // \<1>
line of code   # \<2>
line of code  ;; \<3>
----
<1> A callout behind a line comment for C-style languages.
<2> A callout behind a line comment for Ruby, Python, Perl, etc.
<3> A callout behind a line comment for Clojure.
....

Here's how it looks when rendered:

----
line of code  // <1>
line of code  # <2>
line of code  ;; <3>
----
<1> A callout behind a line comment for C-style languages.
<2> A callout behind a line comment for Ruby, Python, Perl, etc.
<3> A callout behind a line comment for Clojure.

WARNING: Asciidoctor enforces that callouts be placed at the end of the line.

=== XML-friendly callouts

XML doesn't have line comments, so our "tuck the callout behind a line comment" trick doesn't work here.
To use callouts in XML, you must place the callout's angled brackets around the the XML comment and callout number.

Here's how it appears in a listing:

[source]
....
[source,xml]
----
<section>
  <title>Section Title</title>  \<!--1-->
</section>
----
<1> The section title is required.
....

Here's how it looks when rendered:

[source,xml]
----
<section>
  <title>Section Title</title>  <!--1-->
</section>
----
<1> The section title is required.

Notice the comment is gone.
Now both you and the reader can copy and paste XML source code containing callouts without worrying about errors.

=== Callout icons

The font icons setting also enables callout icons drawn using CSS.

[source]
----
= Document Title
:icons: font <1>

NOTE: Asciidoctor now supports font-based admonition icons, powered by Font Awesome! <2>
----
<1> Activates font-based icons in the HTML5 backend
<2> Admonition block that uses a font-based icon

== Source Code Syntax Highlighting

To enable syntax highlighting in your document, you need to set the +source-highlighter+ attribute in the document header.

 :source-highlighter: library value

Asciidoctor supports a number of syntax highlighting libraries.

.Available syntax highlighters
[width="50%"]
|===
|Library |Value

|CodeRay
|coderay

|Highlight.js
|highlightjs

|Prettify
|prettify

|Pygments
|pygments
|===

Once you've set the attribute and library value, set the block style to source and specify the source language in the second attribute position.

.Example
....
[source,ruby]
----
require 'asciidoctor'

puts Asciidoctor.render_file('sample.adoc', :header_footer => true)
----
....

.Example output
[source,ruby]
----
require 'asciidoctor'

puts Asciidoctor.render_file('sample.adoc', :header_footer => true)
----

[listing]
.Code block with title and syntax highlighting
....
[source,ruby]
.app.rb
----
require 'sinatra'

get '/hi' do
  "Hello World!"
end
----
....

====
[source,ruby]
.app.rb
----
require 'sinatra'

get '/hi' do
  "Hello World!"
end
----
====

[listing]
.Code block sourced from file
....
[source,ruby]
----
\include::app.rb[]
----
....

[listing]
.Code block sourced from file relative to source directory
....
:sourcedir: src/main/java

[source,java]
----
\include::{sourcedir}/org/asciidoctor/Asciidoctor.java[]
----
....

.Code block without delimiters (no blank lines)
----
[source,xml]
<meta name="viewport"
  content="width=device-width, initial-scale=1.0">
----

====
[source,xml]
<meta name="viewport"
  content="width=device-width, initial-scale=1.0">
====

TIP: Syntax highlighting is not disabled if an explicit +subs+ attribute is used on a source listing (as long as +specialcharacters+ is in the subs list).

=== Pygments installation

The most popular source code highlighter in the AsciiDoc world, perhaps even the whole world, is {pygments-org}[Pygments].

In order to use Pygments with Asciidoctor, you need to install Pygments (and Python, if you don't have it yet).
You then need to install the pygments.rb RubyGem.

 $ "`\which apt-get || \which yum || \which brew`" install pygments
 $ gem install pygments.rb

To activate it in Asciidoctor, assign the value +pygments+ to the +source-highlighter+ attribute in your document's header.

 :source-highlighter: pygments

== Include Directive

include::{includedir}/include-directive.adoc[]

=== Selecting parts of a document to include

include::{includedir}/include-lines-tags.adoc[]

=== Normalizing block indentation

include::{includedir}/indent-include.adoc[]

=== Include files relative to a common source directory

include::{includedir}/relative-include.adoc[]
 
=== Include content from a URI

include::{includedir}/uri-include.adoc[]

== Metadata and Chunking

NOTE: Section pending

== Docinfo file

You can add custom content to the header or footer of a document with document information (+docinfo+) files.
The docinfo file's content and file extension depends on whether the source document's output is HTML or DocBook.

=== Create a docinfo file

When the source document will be rendered to HTML, the docinfo file can contain the elements allowed in an HTML +<HEAD>+ section, including:

* +<base>+
* +<link>+
* +<meta>+
* +<noscript>+
* +<script>+
* +<style>+
* +<title>+

As seen in the example below, docinfo files are useful for storing metadata, stylesheet, and script information.
Note that you do not need to include the +<head>+ tag, nor is the +<title>+ tag required.

.A docinfo file for HTML output
[source,html]
----
<meta name="keywords" content="open source, documentation">
<meta name="description" content="The dangerous and thrilling adventures of an open source documentation team.>
<link rel="stylesheet" href="basejump.css">
<script src="map.js"></script>
----

Docinfo files for HTML output must be saved with the +.html+ file extension.

When DocBook 5.0 is the rendered output, the docinfo file may include any of the {docbook-info-ref}[+<info>+ element's 48 children], such as:

* +<address>+
* +<copyright>+
* +<edition>+
* +<keywordset>+
* +<publisher>+
* +<subtitle>+

The following example shows some of the content a docinfo file for DocBook might contain.

.A docinfo file for DocBook 5.0 output
[source,xml]
----
<author>
  <personname>
    <firstname>Karma</firstname>
    <surname>Chameleon</surname>
  </personname>
  <affiliation>
    <jobtitle>Word SWAT Team Leader</jobtitle>
  </affiliation>
</author>

<keywordset>
  <keyword>open source</keyword>
  <keyword>documentation</keyword>
  <keyword>adventure</keyword>
</keywordset>

<printhistory>
  <para>April, 2019. Twenty-sixth printing.
  </para>
</printhistory>
----

Docinfo files for DocBook output must be saved with the +.xml+ file extension.
To see another example of a docinfo file for DocBook, checkout the {richfaces-docinfo}[RichFaces Developer Guide docinfo file].

=== Docinfo attributes and file names

To add content from a docinfo file to the header of a rendered document:

. The docinfo file must be named correctly
. The appropriate docinfo attribute must be set in the source document

How you name your docinfo file and the docinfo attribute you set in your source document depends on whether you want to add content to:

[loweralpha]
. a specific document
. all the documents in a directory
. a and b

The attributes and the corresponding file names are listed in the table below.

.Docinfo attributes and file names
|===
|Attribute |Purpose |docinfo file name for HTML |docinfo file name for DocBook

|docinfo
|Add content to a specific document
|+<docname>-docinfo.html+ 
|+<docname>-docinfo.xml+

|docinfo1
|Add content to all documents in the same directory
|+<docname>.html+ 
|+<docname>.xml+

|docinfo2
|Add content from either docinfo file
|+<docname>.html+, +<docname>-docinfo.html+  
|+<docname>.xml+, +<docname>-docinfo.xml+
|===

Let's apply the information above to an example exercise.

You have two AsciiDoc documents, +adventure.adoc+ and +insurance.adoc+, saved in the same folder.
You want to add the same content to the headers of both documents when they're rendered to HTML.

. Create a docinfo file using +<head>+ elements.
. Save the docinfo file as +docinfo.html+.
. Set the +docinfo1+ attribute in +adventure.adoc+ and +insurance.adoc+.

You also want to include some additional content to the header of +adventure.adoc+.

. Create *another* docinfo file using +<head>+ elements.
. Save the docinfo file as +adventure-docinfo.html+.
. Set the +docinfo+ attribute in +adventure.adoc+.
. Alternatively, you could remove the +docinfo1+ attribute and set +docinfo2+ instead.

=== Footer docinfo files

Footer docinfo files are differentiated from header docinfo files by adding +-footer+ to the file name.
In the HTML output, the footer content is inserted inside the footer div (i.e., +<div id="footer">+).
In the DocBook output, the footer content is inserted immediately before the ending +</article>+ or +</book>+ element.

.docinfo
If you want to add content to the footer of a specific document, put the content in the file +<docname>-footer.html+ (for HTML output) or +<docname>-footer.xml+ (for DocBook output), where +<docname>+ is the name of the document without the AsciiDoc extension.
Then, set the attribute +docinfo+ in the source document.

.docinfo1
If you want to add content to the footer of all documents in the same directory, put the content in the file +docinfo-footer.html+ or +docinfo-footer.xml+.
Then, set the attribute +docinfo1+ in the source document to enable the feature.

.docinfo2
If you want the document to look for either docinfo file, set the attribute +docinfo2+ in the source document.

TIP: The "Last updated" line in the footer can be disabled by unassigning the attribute +last-update-label+.

=== Attribute substitution

Docinfo files can include attribute references.

For example, if you created the following docinfo file:

.Docinfo file containing a +revnumber+ attribute reference
[source,xml]
----
<edition>{revnumber}</edition>
----

And this source document:

.Source document including a revision number
----
= Document Title
Author Name
v1.0, 2013-06-01
:doctype: book
:backend: docbook
:docinfo:
----

Then the rendered DocBook output would be:

[source,xml]
----
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
    "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<book lang="en">
  <bookinfo>
    <title>Document Title</title>
    <date>2013-06-01</date>
    <author>
      <firstname>Author</firstname>
      <surname>Name</surname>
    </author>
    <authorinitials>AN</authorinitials>
    <revhistory>
      <revision>
        <revnumber>1.0</revnumber>
        <date>2013-06-01</date>
        <authorinitials>AN</authorinitials>
      </revision>
    </revhistory>
<edition>1.0</edition> <!--1-->
  </bookinfo>
</book>
----
<1> The +revnumber+ attribute reference was replaced by the source document's revision number in the rendered output.

== Counter Attributes

----
[caption=""]
.Parts{counter2:index:0}
|===
|Part Id |Description

|PX-{counter:index}
|Description of PX-{index}

|PX-{counter:index}
|Description of PX-{index}
|===
----

====
[caption=""]
.Parts{counter2:index:0}
|===
|Part Id |Description

|PX-{counter:index}
|Description of PX-{index}

|PX-{counter:index}
|Description of PX-{index}
|===
====

= Navigating and Referencing Your Content

NOTE: Section pending

== Table of Contents

When the +docbook+ backend is set, a table of contents (ToC) is generated automatically from the section level IDs.
The ToC is inserted directly below the document's title and author, titled _Table of Contents_, and lists the section 1 and section 2 level headings.

To include a ToC when using the +html+ or a custom backend, you must set the +toc+ attribute.
The +toc+ attribute can be specified via the command line (+-a toc+) or in the document's header (+:toc:+) 

.+toc+ set via the CLI
----
$ asciidoctor -a toc adventure.adoc
----

.+toc+ set in the document's header
----
include::{includedir}/toc.adoc[]
----

When the +toc+ attribute is set, a table of contents is inserted directly below the title and author in the rendered document.

.Result: Setting the +toc+ attribute
====
image::toc.png[Default table of contents]
====

Asciidoctor provides additional attributes to customize the placement, layout and title of the ToC.

=== Left or right column layout

The ToC can be positioned in a column to the left or right of the document's content by assigning the +left+ or +right+ value to the +toc+ attribute.
The column is scrollable and fixed.

.Assigning the +left+ value to +toc+
----
include::{includedir}/toc-left.adoc[]
----

.Result: Assigning the +left+ value to +toc+
====
image::toc-left.png[Table of contents using left value]
====

NOTE: Setting +:toc: left+ is equivalent to using the original AsciiDoc +toc2+ attribute.

// How does the toc-position attribute fit into this section?

=== Manual placement

The +toc-placement+ attribute allows you to place the ToC anywhere in your document.
To control where the ToC is rendered in your document, unset the +toc-placement+ attribute.
Then, within the body of your document, use the +toc::[]+ block macro to indicate the ToC's location.

.Unsetting +toc-placement+ and using the +toc::[]+ macro
----
include::{includedir}/toc-macro.adoc[]
----
<1> The +toc+ attribute must be set in order to use +toc-placement+.
<2> +toc-placement+ is unset by placing a +!+ after its name in the document's header.
<3> In this example, the +toc::[]+ macro is placed below the first section's title, indicating that this is the location where the ToC will be displayed once the document is rendered.

.Result: Unsetting +toc-placement+ and using the +toc::[]+ macro
====
image::toc-macro.png[Manual placement of the table of contents]
====

Asciidoctor also includes a built-in +preamble+ value.
This value places the ToC below the preamble.
You do not need to include the +toc::[]+ block macro in the document when using the +preamble+ value.

If you set +toc-placement+ but don't assign it a value, the ToC will be placed in the document's header.

CAUTION: The +toc-placement+ and +toc-position+ attributes are mutually exclusive.

=== Title

The +toc-title+ attribute allows you to change the title of the ToC.

.Defining a new ToC title
----
include::{includedir}/toc-title.adoc[]
----
<1> The +toc+ attribute must be set in order to use +toc-title+.
<2> +toc-title+ is set and assigned the value +Table of Adventures+ in the document's header.

.Result: Defining a new ToC title
====
image::toc-title.png[Table of contents title]
====

=== Levels

By default, the ToC will display level 1 and level 2 section titles.
You can set a different level with the +toclevels+ attribute.

.Defining a new +toclevels+ value
----
include::{includedir}/toc-level.adoc[]
----
<1> The +toc+ attribute must be set in order to use +toclevels+.
<2> +toclevels+ is set and assigned the value +4+ in the document's header. The ToC will list the titles of the section 1, 2, 3, and 4 levels when the document is rendered.

.Result: Defining a new +toclevels+ value
====
image::toc-level.png[Table of contents display levels]
====

=== Table of Contents summary

[cols="1,1,2,2,1"]
.Table of contents attributes and values
|===
|Attribute |Values |Example Syntax |Comments |Backends

|toc
|auto, left, right
|+:toc:+
|DocBook backend sets it by default.
|html, docbook

|toclevels
|1, 2, 3, 4, 5
|+:toclevels: 4+
|Default value is 2.
|html

|toc-placement
|auto, preamble
|+:toc-placement: preamble+
|Unset +toc-placement+ in order to use the +toc::[]+ macro in the document body.
|html

|toc-position
|left, right
|+:toc-position: right+
|
|html

|toc-title
|user defined
|+:toc-title: Rocking the Table+
|Default title is _Table of Contents_.
|html

|===

[[section-index]]
== Index

NOTE: Section pending

[[section-footnotes]]
== Footnotes

.Normal and reusable footnotes
----
A statement.footnote:[Clarification about this statement.]

A bold statement.footnoteref:[disclaimer,These opinions are my own.]

Another bold statement.footenoteref:[disclaimer]
----

====
[.unstyled]
|===
a|
A statement.footnote:[Clarification about this statement.]

A bold statement.footnoteref:[disclaimer,These opinions are my own.]

Another bold statement.footnoteref:[disclaimer]
|===
====

[[section-bibliography]]
== Bibliography

.References
----
'The Pragmatic Programmer' <<prag>> should be required reading for
all developers.

[bibliography]
- [[[prag]]] Andy Hunt & Dave Thomas. 'The Pragmatic Programmer:
  From Journeyman to Master'. Addison-Wesley. 1999.
- [[[seam]]] Dan Allen. 'Seam in Action'. Manning Publications.
  2008.
----

====
'The Pragmatic Programmer' <<prag>> should be required reading for
all developers.

[bibliography]
- [[[prag]]] Andy Hunt & Dave Thomas. 'The Pragmatic Programmer:
  From Journeyman to Master'. Addison-Wesley. 1999.
- [[[seam]]] Dan Allen. 'Seam in Action'. Manning Publications.
  2008.
====

= Processing Your Content

NOTE: Section pending

While the AsciiDoc syntax is designed to be readable in raw form, the intended audience for that format are writers and editors.
Readers aren't going to appreciate the raw text nearly as much.
Aesthetics matter.
You'll want to apply nice typography with font sizes that adhere to the ``golden ratio'', colors, icons and images to give it the respect it deserves.
That's where the Asciidoctor processor comes in.

== Selecting an Output

NOTE: Section expanision needed, List most options here but only go in depth on the common ones

The Asciidoctor processor parses a document and translates it into a variety of formats, including HTML, DocBook and PDF.
The processor produces the output format by using a backend that you specify with the +-b+ (+--backend+) command line option.
If no backend is indicated, the processor's default backend is used.

Asciidoctor has three native backends.

+html5+:: HTML 5 markup styled with CSS3.
Asciidoctor's default backend.
+docbook+:: DocBook XML 4.5 markup.
+docbook5+:: DocBook XML 5.0 markup.

It also has several backends that can be plugged in.

+manpage+:: Manual pages for Unix and Unix-like operating systems.
+pdf+:: Portable Document Format (PDF).

////
The AsciiDoc processor supports numerous backends, including:

+xhtml11+:: XHTML 1.1 markup styled with CSS2.
AsciiDoc's default backend.
+html5+:: HTML 5 markup styled with CSS3.
+docbook+:: DocBook XML 4.5 markup.
+pdf+:: Portable Document Format (PDF).
////

== Preview Your Content

NOTE: Section pending

=== Guard/Live viewer

NOTE: Section pending

== Rendering a Document

NOTE: Section pending

////
Unset attributes from the CLI

When used on the command line, the leading +!+ is misinterpreted by the shell as a command. 
However, this is easily solved by quoting (or escaping) the argument value. 

For example:

 -a '!numbered'

or

 -a \!numbered

unset the +numbered+ attribute when entered on the command line.

Typically, attribute entries are set in the document's header.
////

=== Process multiple source files from the CLI

You can pass multiple source files (or a file name pattern) to the Asciidoctor CLI and it will process all the files in turn.

Let's assume there are two AsciiDoc files in your directory, [file]#a.adoc# and [file]#b.adoc#.
When you enter the following command in your terminal:

 $ asciidoctor a.adoc b.adoc

Asciidoctor will process both files, transforming [file]#a.adoc# to [file]#a.html# and [file]#b.adoc# to [file]#b.html#.

To save you some typing, you can use the glob operator (+*+) to match both files using a single argument:

 $ asciidoctor *.adoc

The shell will expand the previous command to the one you typed earlier:

 $ asciidoctor a.adoc b.adoc

You can also render all the AsciiDoc files in immediate subfolders using the double glob operator (+**+) in place of the directory name:

 $ asciidoctor **/*.adoc

To match all files in the current directory and immediate subfolders, use both glob patterns:

 $ asciidoctor *.adoc **/*.adoc

If the file name argument is quoted, the shell will not expand it:

 $ asciidoctor '*.adoc'

This time, the text +*.adoc+ gets passed directly to Asciidoctor instead of being expanded to [file]#a.adoc# and [file]#b.adoc#.
In this case, Asciidoctor handles the glob matching internally in the same way the shell does (when the file name is not in quotes)--with one exception.
Asciidoctor can match files in the current directory and subfolders at any depth using a single glob pattern:

 $ asciidoctor '**/*.adoc'

=== Specify output file

The +asciidoctor+ command writes to the specified output file if the input is stdin.

For example, the following command writes to +output.html+ instead of to the console:

 $ echo "content" | asciidoctor -o output.html

== HTML

// TODO: expand this introduction 

Asciidoctor's default backend and output is HTML.

+html5+:: HTML 5 markup styled with CSS3.

=== Using the command line

include::{includedir}/html-command-line.adoc[]

=== Using the Ruby API

include::{includedir}/html-ruby-api.adoc[]

=== Styling the HTML with CSS

include::{includedir}/html-styles.adoc[]

=== Managing images

include::{includedir}/html-manage-images.adoc[]

=== CodeRay and Pygments stylesheets

include::{includedir}/html-code-styles.adoc[]

== DocBook

Asciidoctor 0.1.4 can produce DocBook 5.0 output, which is generated by the +docbook5+ backend.

The output from the +docbook5+ backend only differs from the +docbook45+ backend so far as to make it compliant to the DocBook 5.0 specification.
A summary of the differences are as follows:

* XSD declarations are used on the document root instead of a DTD
* +<info>+ elements for document info instead of +<articleinfo>+ and +<bookinfo>+
* elements that hold the author's name are wrapped in a +<personname>+ element
* the id for an element is defined using an +xml:id+ attribute
* +<link>+ is used for links instead of +<ulink>+
* the URL for a link is defined using the +xlink:href+ attribute

Refer to {docbook5-ref}[What's new in DocBook v5.0?] for more details about how DocBook 5.0 differs from DocBook 4.5.

To use the DocBook 5.0 backend, set the backend to +docbook5+, as shown in this example:

 $ asciidoctor -b docbook5 sample.adoc

Here's a sample DocBook 5.0 document generated by this backend:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<article xmlns="http://docbook.org/ns/docbook"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:lang="en">
  <info>
    <title>Hello, AsciiDoc!</title>
    <date>2013-09-03</date>
    <author>
      <personname>
        <firstname>Doc</firstname>
        <surname>Writer</surname>
      </personname>
      <email>doc@example.com</email>
    </author>
    <authorinitials>DW</authorinitials>
  </info>
  <simpara>
    An introduction to <link xlink:href="http://asciidoc.org">AsciiDoc</link>.
  </simpara>
  <section xml:id="_first_section">
    <title>First Section</title>
    <itemizedlist>
      <listitem>
        <simpara>item 1</simpara>
      </listitem>
      <listitem>
        <simpara>item 2</simpara>
      </listitem>
    </itemizedlist>
  </section>
</article>
```

[TIP]
====
The +xmlns+ attribute is now added to the root DocBook element by default.
Set the attribute +noxmlns+ to disable this feature.
====

Since the AsciiDoc syntax was designed with DocBook output in mind, the conversion is very good.
There's a corresponding DocBook element for each markup in the AsciiDoc syntax.

To convert the +mysample.adoc+ document to DocBook format, call the processor with the backend flag set to +docbook5+:

 $> asciidoctor -b docbook5 mysample.adoc

A new XML document, named +sample.xml+, will now be present in the current directory.

 $> ls
 mysample.adoc  mysample.html  mysample.xml

If you're on Linux, you can view the DocBook file with {yelp}[Yelp].

 $> yelp mysample.xml

Using the Asciidoctor Ruby API, you can generate a DocBook document directly from a Ruby application:

[source,ruby]
----
Asciidoctor.render_file('mysample.adoc', :in_place => true,
    :backend => 'docbook5')
----

DocBook is only an intermediary format in the toolchain.
You'll either feed it into a system that processes DocBook (like {publican}[publican]), or you can convert it to PDF using the +a2x+ command from AsciiDoc.

== Manpages

One of the most interesting uses of AsciiDoc is for creating man pages (short for manual pages) for Unix and Unix-like operating systems.
A man page conforms to a special document structure.
That structure is recognized by Asciidoctor, when the +doctype+ attribute is set to +manpage+.
Additionally, Asciidoctor produces the same output when rendering a man page to HTML using the +html5+ backend.

When reading an AsciiDoc document using the +manpage+ doctype, Asciidoctor parses the following man page metadata:

* mantitle
* manvolnum
* manname
* manpurpose

The +mantitle+ and +manvolum+ are captured from the document title. 
The +manname+ and +manpurpose+ are taken from the first section of the document, which must be a level 1 section and have content in the format +<manname> - <manpurpose>+.

Here's an example of a man page written in AsciiDoc:

```
= asciidoctor(1)
:doctype: manpage

== NAME
asciidoctor - converts AsciiDoc source files...

== SYNOPSIS
*asciidoctor* ['OPTION']... 'FILE'...
```

From this document, Asciidoctor extracts the following man page-related attributes:

[horizontal]
mantitle:: asciidoctor
manvolnum:: 1
manname:: asciidoctor
manpurpose:: converts AsciiDoc source files...

Refer to {man-raw}[the AsciiDoc source of the Asciidoctor man page] to see a complete example.
The man pages for git are also produced from AsciiDoc documents, so you can use those as another example to follow.

The Asciidoctor Backends repository hosts an early draft of a {man-backend-git}[manpage backend], which is now used to generate the man page for Asciidoctor.

== PDFs

NOTE: To convert your document to PDF, you'll need to use the new {fopdf-ref}[Asciidoctor fopdf extension].
Directions for using the extension are documented in its {fopdf-doc-ref}[README].

WARNING: The content regarding PDF generation below this warning block is out of date. Asciidoctor 0.1.4 does not require the +a2x+ tool to produce PDFs. New instructions pending.

PDF is a nice format for presenting a final version of a document.
For legacy reasons, the conversion to PDF is handled by a separate program in the AsciiDoc distribution, {a2x}[+a2x+].

+a2x+ accepts a DocBook file, like the +sample.xml+ file created in the section above, as input and converts it to a PDF.

In your console: 

. Call the +a2x+ program
. Select the output format with +-f+ (+--format+)
. Followed by the format type +pdf+

//
 $> a2x -f pdf sample.xml

A PDF document, named +sample.pdf+, will now be present in the current directory:

 $> ls
 sample.adoc  sample.html  sample.pdf  sample.xml

You can view the PDF using any PDF viewer.

Rather than converting from AsciiDoc to DocBook and then from DocBook to PDF in two steps, +a2x+ can go directly from AsciiDoc to PDF in a single call:

 $> a2x -f pdf sample.adoc

== Running Asciidoctor Securely

Asciidoctor provides security levels that control the read and write access of attributes, the +include+ directive, macros, and scripts while a document is processing.
Each level includes the restrictions enabled in the prior security level.

[horizontal]
+UNSAFE+::
A safe mode level that disables any security features enforced by Asciidoctor.
Ruby is still subject to its own restrictions.
+
*This is the default safe mode for the CLI.*
Its integer value is +0+.

+SAFE+::
This safe mode level prevents access to files which reside outside of the parent directory of the source file.
It disables all macros, except the +include+ directive.
The paths to +include+ files must be within the parent directory.
It allows assets to be embedded in the document.
+
Its integer value is +1+.

+SERVER+::
A safe mode level that disallows the document from setting attributes that would affect the rendering of the document.
This level trims +docfile+ to its relative path and prevents the document from:
+
--
* setting +source-highlighter+, +doctype+, +docinfo+ and +backend+
* seeing +docdir+
--
+
It allows +icons+ and +linkcss+.
+
*This is the default safe mode for the API.*
Its integer value is +10+.

+SECURE+::
A safe mode level that disallows the document from attempting to read files from the file system and including their contents into the document.
Additionally, it:
+
--
* disables icons
* disables the +include+ directive
* data can not be retrieved from URIs
* prevents access to stylesheets and JavaScripts
* sets the backend to +html5+
* disables +docinfo+ files
* disables +data-uri+
* disables +docdir+ and +docfile+
* disables source highlighting
--
+
Asciidoctor and trusted extensions may still be allowed to embed trusted content into the document.
Its integer value is +20+.

////
|===

|{empty} |Unsafe |Safe |Server |Secure

|URI access 
|system access 
|base directory access 
|docdir 
|docfile 
|docinfo
|backend
|doctype
|source-highlighter
|macros
|include
|data-uri
|linkcss
|icons

|===

TIP: GitHub processes AsciiDoc files using the +SECURE+ level. 
////

You can set Asciidoctor's safe mode level using the CLI or API.

=== Set the safe mode in the CLI

When Asciidoctor is invoked via the CLI, the safe mode is set to +UNSAFE+ by default.
You can change the safe level by executing one of the following commands in the CLI.

+-S+, +--safe-mode=SAFE_MODE+::
Sets the safe mode level of the document according to the assigned level (+UNSAFE+, +SAFE+, +SERVER+, +SECURE+).

+--safe+, +asciidoctor-safe+::
Sets the safe mode level to +SAFE+. 
Provided for compatibility with the python AsciiDoc +safe+ command.

////
-B, --base-dir=DIR
Base directory containing the document and resources. Defaults to the directory containing the source file, or the working directory if the source is read from a stream. Can be used as a way to chroot the execution of the program.
////

=== Set the safe mode in the API

The default safe level in the API is +SERVER+.

In the API, you can set the safe mode using a string, symbol or integer value.
The value must be set in the document constructor using the +:safe+ option.

 result = Asciidoctor.render_file('master.ad', :safe => 'server')

or

 result = Asciidoctor.render_file('master.ad', :safe => :server)

or 

 result = Asciidoctor.render_file('master.ad', :safe => 10)

=== Set attributes based on the safe mode

You can enable or disable content within your document based on safe modes using the +safe-mode+ attribute.

The safe mode can be defined by its integer value or name.
For example, to assign the +SAFE+ level to the attribute, you could append +10+ or +safe+ to the attribute.

 safe-mode-10
 
or

 safe-mode-safe
 
The attributes in the next example enable the author to define replacement text for features that are disabled in high security environments.

For example:

[source]
----
\ifdef::safe-mode-secure[]
Links to chapters.
\endif::safe-mode-secure[]
----

////
Allow the include macro to import a file from a URI.

Example:

 include::https://raw.github.com/asciidoctor/asciidoctor/master/README.adoc[]

To be secure by default, the allow-uri-read attribute must be set in the API or CLI (not document) for this feature to be enabled. It's also completely disabled if the safe mode is SECURE or greater.
Since this is a potentially dangerous feature, its disabled if the safe mode is SECURE or greater. Assuming the safe mode is less than SECURE, you must also set the allow-uri-read attribute to permit Asciidoctor to read content from a URI.

I decided the following defaults for the header_footer option make the most sense:

true if using the cli (use -s to disable, consistent with asciidoc)
false if using the API, unless rendering directly to a file, in which case true is the default
The basic logic is that if you are writing to a file, you probably want to create a standalone document. If you are rendering to a string, then you probably want an embedded document. Of course, you can always set it explicitly, this is just a default setting.

The reason I think the header_footer default is important is because we don't want people switching from Markdown to AsciiDoc and be totally taken by surprise when they start getting a full HTML document. On the other hand, if you are rendering to a file (or using the cli), then it makes a lot of sense to write a standalone document. To me, it just feels natural now.
////

= Creating Custom Output

NOTE: Part introduction pending

== Slideshows

The conversion to HTML-based slides is handled by a custom backend.
The backends usually requires that you adhere to a set of conventions to define a slide and its content.
But there's nothing in that content that restricts the document from being converted to a regular HTML page or PDF.

The first backend created was the one for deck.js.
Asciidoctor has backends for generating dzslides and reveal.js presentations as well.
Backends for other presentation frameworks are in the works.

=== Deck.js

The {backend-git}[deck.js backend] for Asciidoctor is a collection of Haml templates that transform an AsciiDoc document to HTML 5-based slides animated by {deckjs-org}[deck.js].

==== Gem requirements

The Asciidoctor deck.js backend requires the following gems:

* asciidoctor
* tilt
* haml

To determine what gems are installed on your system, open a terminal window and type:
 
 $ gem list --local

A list of installed gems will be returned.

If you're missing the +asciidoctor+, +tilt+, or +haml+ gems, install them from the command line with +gem install+.

 $ gem install asciidoctor tilt haml

==== Backend and deck.js installation

. Download or +git clone+ the {backend-git}[Asciidoctor backends] repository.

 $ git clone git://github.com/asciidoctor/asciidoctor-backends.git

. Create a directory named +deck.js+ inside your working directory (i.e. where your AsciiDoc document resides).

. {deckjs-zip}[Download] and extract the deck.js archive or +git clone+ the {deckjs-git}[deck.js] repository into the +deck.js+ directory you created in step 2.

 $ git clone git://github.com/imakewebthings/deck.js.git

. If you plan to split your slides, {decksplitjs-git}[download the +deck.split.js+ extension] and copy it into the +deck.js/extensions+ directory.

. If you want to use the fullscreen photo feature, create an +images+ directory in your working directory.

==== Deckjs backend attributes

There are a number of document attributes specific to the +deckjs+ backend.

.+deckjs+ backend document attributes
[cols="2,1,2m"]
|===
|Attribute |Description |Example

|:backend: deckjs
|Activates the deck.js backend to render the document as a deck.js presentation
|:backend: deckjs

|:deckjs_theme: <theme>
|Sets the deck.js theme to neon, swiss or web-2.0
|:deckjs_theme: web-2.0

|:deckjs_transition: <type>
|Sets the transition style to horizontal-slide, vertical-slide or fade
|:deckjs_transition: fade

|:customjs: <javascript location>
|Sets a custom javascript file; can be used as a deck.js custom configuration
|:customjs: <javascript location>

|:customcss: <css location>
|Sets a custom css file
|:customcss: <css location>

|:menu:
|Toggle to and from a grid layout overview of all the slides by pressing the +m+ key
|:menu:

|:navigation:
|Renders clickable previous and next navigation icons on the slides
|:navigation:

|:status:
|Renders the current slide number and total number of slides
|:status:

|:split:
|Registers the split module for use in the document
|:split:
|===

NOTE: You can also specify a custom stylesheet using the +stylesheet+ attribute, which customizes AsciiDoc elements like section, paragraph, images, etc.

The attributes described in the table above are set in the header of your document.

.Header with +deckjs+ backend attributes
....
= Presentation Title
Presenter Name
:backend: deckjs
:deckjs_theme: web-2.0
:deckjs_transition: horizontal-slide
:navigation:
....

==== Slide syntax examples

Structuring a slideshow and writing the slide content uses the same syntax as a typical AsciiDoc document, with a few added features.

Let's see some examples of the +deckjs+ backend features:

.Slide titles and background images
----
= Title of Presentation <1>
Presenter Name
:backend: deckjs
:deckjs_transition: fade
:navigation:

== Title of Slide One <2>

This is the first slide after the title slide.

[canvas-image="images/example.jpg"] <3>
== Slide Two's Title will not be displayed <4>

[role="canvas-caption", position="center-up"] <5>
This text is displayed on top of the example.jpg image.
----
<1> The presentation title and author's name will be displayed on the title slide.
<2> Each new slide is designated by a level 1 section title (`==`).
<3> The +canvas-image+ attribute embeds a fullscreen image as a slide background. Position the attribute above the title of the slide you want the image applied to.
<4> When the +canvas-image+ attribute is applied to a slide, that slide's title will not be displayed.
<5> +canvas-caption+ applies a colored box around the caption text. +position+ specifies the location of the caption block (bottom-left, top-left, bottom-right, top-right, center-up, center-down)

.Stepped paragraphs, lists, and blocks
----
== Stepped paragraphs

[options="step"]
This paragraph is displayed first.

[options="step"]
Then this paragraph is displayed when the _Next_ arrow is clicked.

== Stepped list items

[options="step"]
* A bullet is displayed each time the _Next_ arrow is clicked.
* B
* C

== Stepped blocks

[options="step"]
----
Block one
----

[options="step"]
----
Block two
----
----

The +step+ option reveals each paragraph, bullet, etc. separately each time you click the _Next_ arrow.

WARNING: The original AsciiDoc +deckjs+ backend for the AsciiDoc processor used the option +incremental+ instead of +step+. 
We've changed it to +step+ in order to save you some typing.

.Split
----
= Presentation Title
Presenter Name
:backend: deckjs
:split: <1>

== This Slide is Split

This Slide will act like

<<< <2>

three individual slides with the same title

<<<

once the document is rendered.
----
<1> To create multiple, consecutive slides with the same title, set the +split+ attribute in the document header.
<2> Then, within a slide, insert `<<<` to specify the slide breaks.

==== Rendering

To render your presentation as HTML5, execute the command:

 $ asciidoctor -T ../asciidoctor-backends/haml presentation.adoc

. The command +-T+ (+--template-dir+) tells the Asciidoctor processor to override the built-in backends.
. Directly after +-T+ is the path to where you saved or cloned the Asciidoctor backends repository containing the +deckjs+ backend (step 1 under the <<backend-and-deckjs-installation,installation section>>).  

== Stylesheet Factory

NOTE: Section pending

The {factory-ref}[Asciidoctor stylesheet factory] is where themes are developed for styling your documents.
Specifically, these stylesheets can be used to quickly customize the look and feel of HTML 5 documents generated by Asciidoctor.

To view the Asciidoctor themes in action, visit the {showcase-ref}[theme showcase].

WARNING: The Asciidoctor stylesheet factory is only compatible with Asciidoctor 0.1.2 and greater.

=== Setting up the factory

The stylesheets in the Asciidoctor stylesheet factory are built using {compass-ref}[Compass], a CSS authoring framework that uses {sass-ref}[Sass] to generate CSS files.
The styles and components are generated by {foundation-ref}[Foundation 4], an awesome and flexible CSS component framework that ensures your stylesheet is cross-browser and mobile friendly.

==== Install the gems

In order to build the stylesheets, you must download the Asciidoctor stylesheet factory repository and install the Compass and Foundation gems.

. Download or clone the {factory-ref}[Asciidoctor stylesheet factory repository].
+
NOTE: It does not matter where you save the project on your system.
. Make sure you have {get-ruby-ref}[Ruby and RubyGems] installed, and, ideally, {bundler-ref}[Bundler].
. Run Bundler to install the Compass and Foundation gems.

 $ bundle install

+
This +bundle+ command is equivalent to executing:

 $ gem install --version '0.12.2' compass
 $ gem install --version '4.1.1' zurb-foundation

Once you have the gems installed, you can build the stylesheets.

==== Build the stylesheets

To build the stylesheets:

. Navigate to the Asciidoctor stylesheet factory directory on your system. 
. Run Compass's +compile+ command.

 $ compass compile

The stylesheets are compiled from the Sass source files in the [path]'sass/' folder and written to the [path]'stylesheets/' folder.
You can reference the stylesheets in [path]'stylesheets/' from your HTML file.

=== Applying a stylesheet

Let's practice applying a stylesheet to a simple AsciiDoc file.

. Create an AsciiDoc file like the one below.
. Save the file as [path]'sample.adoc'.

// end

[source]
----
= Introduction to AsciiDoc
Doc Writer <doc@example.com>

A preface about http://asciidoc.org[AsciiDoc].

== First Section

* item 1
* item 2

[source,ruby]
puts "Hello, World!"
----

Next, you'll use the Asciidoctor processor to generate HTML and apply a stylesheet to it from the [path]'stylesheets/' directory.

=== Generate an HTML document

Now it's time to pick the stylesheet you want to apply to your content when it is rendered.
In your file browser, navigate to the [path]'stylesheets/' directory.
Or, using a console, change to the [path]'stylesheets/' directory and list the available stylesheets using the +ls+ command.

 $ ls

.Console output of +ls+ command
....
asciidoctor.css  foundation-lime.css    iconic.css       riak.css
colony.css       foundation-potion.css  maker.css        rubygems.css
foundation.css   golo.css               readthedocs.css
....

Let's apply the [path]'colony.css' stylesheet to the sample document.

. Navigate to the directory where you saved [path]'sample.adoc'.
. Call the +asciidoctor+ processor.
. Specify the stylesheet you want applied with the +stylesheet+ attribute.
. Tell the processor where the specified stylesheet is located with the +stylesdir+ attribute.

 $ asciidoctor -a stylesheet=colony.css -a stylesdir=../stylesheets sample.adoc

Open a browser, navigate to [path]'sample.html' and checkout the result!
If you inspect the [path]'sample.html' document, you should see that the stylesheet is embedded in the rendered document.

.Stylesheet images
****
The Golo, Maker, and Riak themes include image assets.
To apply these themes to your document correctly, the applicable images must be copied into the same directory as the generated output.

For example, to apply the [path]'maker.css' stylesheet to [path]'sample.adoc':

. Copy [path]'body-bh.png' from the [path]'images/maker/' directory into the output directory.
. Call the +stylesheet+ and +styledir+ attributes.

 $ asciidoctor -a stylesheet=maker.css -a stylesdir=../stylesheets sample.adoc
 
Navigate to [path]'sample.html' in your browser. The [path]'body-bh.png' image should add a graph paper-like background to your generated output.
****

=== External preview

You may want to preview sample HTML files on another computer or device.
To do that, you need to serve them through a web server.
You can quickly serve HTML files in the root directory of the project using the following command:

.Using Python
 $ python -m SimpleHTTPServer 4242

or

.Using Ruby >= 1.9.3
 $ ruby -run -e httpd . -p 4242

== Custom Stylesheets

Themes go in the [path]'sass/' folder.
To create a new theme, let's call it +hipster+, start by creating two new files:

[path]'sass/hipster.scss'::
  * Imports the theme settings, which includes default variables and resets
  * Imports the AsciiDoc components
  * Defines any explicit customizations

[path]'sass/settings/_hipster.scss'::
  * Sets variables that customize Foundation 4 and the AsciiDoc CSS components

Here's a minimal version of [path]'sass/hipster.scss':

[source, scss]
----
@import "settings/hipster";
@import "components/asciidoc";
@import "components/awesome-icons";
----

NOTE: You don't have to include the underscore prefix when importing files.

NOTE: The +awesome-icons+ component is only applicable to HTML generated by Asciidoctor > 0.1.2 with the +icons+ attribute set to +font+.

You can add any explicit customizations below the import lines.

The variables you can set in [path]'sass/settings/_hipster.scss' are a combination of the {factory-ref}/blob/master/sass/settings/_settings.scss.dist[Foundation 4 built-in global settings] and {factory-ref}/blob/master/sass/settings/_defaults.scss[global settings and imports for the AsciiDoc components].

=== Multiple custom template directories

Custom templates can be stored in multiple directories.
That means you can build on an existing backend by copying only the templates you want to modify.
Then, just pass both the directory holding the original templates and the directory containing your customized templates when you invoke Asciidoctor.

In the CLI, multiple template directories are specified by using the +-T+ option multiple times.

 $ asciidoctor -T /path/to/original/templates -T /path/to/modified/templates sample.adoc

In the API, multiple template directories are specified by passing an array to the +template_dirs+ option:

```ruby
Asciidoctor.render_file 'sample.adoc', :safe => :safe, :in_place => true,
    :template_dirs => ['/path/to/original/templates', '/path/to/modified/templates']
```

== Styling DocBook and PDF Output

NOTE: Section pending

= Publishing Your Content

NOTE: Section pending

== Repositories

NOTE: Section pending

== Static website generators

NOTE: Section pending

=== Front matter added for static site generators

Many static site generators (i.e., Jekyll, Middleman, Awestruct) rely on "front matter" added to the top of the document to determine how to render the content.
Front matter typically starts on the first line of a file and is bounded by block delimiters (e.g., +---+).

Here's an example of a document that contains front matter:

```
--- <1>
layout: default <2>
--- <1>
= Document Title

content
```
<1> Front matter delimiters
<2> Front matter data

The static site generator removes these lines before passing the document to the AsciiDoc processor to be rendered.
Outside of the tool, however, these extra lines can throw off the processor.

If the +skip-front-matter+ attribute is set, Asciidoctor 0.1.4 will recognize the front matter and consume it before parsing the document.
Asciidoctor stores the content it removes in the +front-matter+ attribute to make it available for integrations.
Asciidoctor also removes front matter when reading <<include-directive,include files>>.

TIP: Awestruct can read front matter directly from AsciiDoc attributes defined in the document header, thus eliminating the need for this feature.

==== Configuring attributes for Awestruct

Awestruct defines a set of default attributes that it passes to the API in its [path]'/default-site.yml' file.
One of the attributes in that configuration is +imagesdir+. 
The value there is set to [path]'/images'. 
That means the value in your document is skipped due to the precedence rules.

Fortunately, there is one additional place you can override the attribute. 
This gives you the opportunity to set your own default and to flip the precedence order so that the document wins out. 
If an attribute value that is passed to the API ends with an +@+ symbol, it makes that assignment have a lower precedence than an assignment in the document.

You can define attributes you want to pass to the API in the [path]'_config/site.yml' file. 
Here's an example entry for Asciidoctor:

```yaml
asciidoctor:
  :safe: safe
  :attributes:
    imagesdir: /assets/images@
    icons: font
    ...
```

NOTE: The second-level keys (safe and attributes, in this case) must have colons on both sides of the key name. 
The rest of the keys only have a colon after the key.

With this configuration added, you should observe that the +imagesdir+ attribute in your document is now respected.

[[api]]
= Using Asciidoctor's API

include::{includedir}/api-intro.adoc[]

== Load and Render a File Using the API

include::{includedir}/load-render-api.adoc[]

=== Render strings

include::{includedir}/string-api.adoc[]

== Provide custom templates

include::{includedir}/templates-api.adoc[]

= Extensions

Extensions have proven to be central to the success of AsciiDoc and the Python implementation.
Despite the success they've enjoyed, there's still _plenty_ of room for improvement.

Extensions in AsciiDoc (technically called filters) have a number of problems:

* they are challenging to write because they work at such a low-level (read as: nasty regular expressions)
* they are fragile since they rely on system commands to do anything significant
* they are hard to distribute due to the lack of integration with a formal distribution system

The goal for Asciidoctor has always been to allow extensions to be written using the full power of a programming language (whether it be Ruby, Java, Groovy or JavaScript), similar to what we've done with the backend (rendering) mechanism.
That way, you don't have to shave yaks to get the functionality you want, and you can distribute the extension using defacto-standard packaging mechanisms (like RubyGems or JARs).

The extension API is available as a technology preview in Asciidoctor 0.1.4.

.Technology Preview
[WARNING]
====
The extension API should be considered *experimental* and *subject to change*.
This technology preview is intended for developers interested in playing around with it and helping to mature the design.

If you need the capabilities that extensions provide now, don't be afraid to jump on board.
Just keep in mind that you may need to rework parts of your extensions when you upgrade Asciidoctor.
====

== Extension Points

Here are the extension points that are available in Asciidoctor 0.1.4.

Preprocessor::
  Processes the raw source lines before they are passed to the parser.

Treeprocessor::
  Processes the [class]#Asciidoctor::Document# (AST) once parsing is complete.

Postprocessor::
  Processes the output after the document has been rendered, but before it's written to disk.

Block processor::
  Processes a block of content marked with a custom block style (i.e., `[custom]`). (similar to an AsciiDoc filter)

Block macro processor::
  Registers a custom block macro and processes it (e.g., `gist::12345[]`).

Inline macro processor::
  Registers a custom inline macro and processes it (e.g., `btn:[Save]`).

Include processor::
  Processes the `include::<filename>[]` directive.

These extensions are registered per document using a callback that feels sort of like a DSL:

```ruby
Asciidoctor::Extensions.register do |document|
  preprocessor FrontMatterPreprocessor
  treeprocessor TerminalCommandTreeprocessor
  postprocessor CustomFooterPostprocessor
  block :yell, YellBlock
  block_macro :gist, GistMacro if document.basebackend? 'html'
  inline_macro :man, ManpageMacro
end
```

You can register more than one processor of each type, though you can only have one processor per custom block or macro.
Each registered class is instantiated when the [class]#Asciidoctor::Document# is created.

NOTE: There is currently no extension point for processing a built-in block, such as a normal paragraph.
Look for that feature in a future Asciidoctor release.

For now, you need to use the Asciidoctor API (not the CLI) in order to register the extensions and invoke Asciidoctor.
Eventually, we'll be able to load extensions packaged in a RubyGem (Ruby) or JAR (Java) by scanning
the LOAD_PATH (Ruby) or classpath (Java), respectively.
We may also ship some built-in extensions that can be enabled using an attribute named +extensions+, similar to how Markdown processors work.

TIP: For those of you on the JVM, yes, you can write extensions in Java.
We've prototyped it and it works.
We're still sorting out a few technical challenges and documentation to make it completely smooth, but we'll get there.
For details, follow the discussion in issue {issue-ref}/97[#97].

== Example Extensions

Below are several examples of extensions and how they are registered.

=== Preprocessor example

Purpose::
  Skim off front matter from the top of the document that gets used by site generators like Jekyll and Awestruct.

.sample-with-front-matter.ad

```
---
tags: [announcement, website]
---
= Document Title

content

[subs="attributes,specialcharacters"]
.Captured front matter
....
---
{front-matter}
---
....
```

.FrontMatterPreprocessor

```ruby
require 'asciidoctor'
require 'asciidoctor/extensions'

class FrontMatterPreprocessor < Asciidoctor::Extensions::Preprocessor
  def process reader, lines
    return reader if lines.empty?
    front_matter = []
    if lines.first.chomp == '---'
      original_lines = lines.dup
      lines.shift
      while !lines.empty? && lines.first.chomp != '---'
        front_matter << lines.shift
      end

      if (first = lines.first).nil? || first.chomp != '---'
        lines = original_lines
      else
        lines.shift
        @document.attributes['front-matter'] = front_matter.join.chomp
        # advance the reader by the number of lines taken
        (front_matter.length + 2).times { reader.advance }
      end
    end
    reader
  end
end
```

.Usage

```ruby
Asciidoctor::Extensions.register do |document|
  preprocessor FrontMatterPreprocessor
end

Asciidoctor.render_file 'sample-with-front-matter.ad', :safe => :safe, :in_place => true
```

=== Treeprocessor example

Purpose::
  Detect literal blocks that contain terminal commands, strip the prompt character and style the command using CSS in such a way that the prompt character cannot be selected (as seen on help.github.com).

.sample-with-terminal-command.ad

```
 $ echo "Hello, World!"

 $ gem install asciidoctor
```

.TerminalCommandTreeprocessor

```ruby
class TerminalCommandTreeprocessor < Asciidoctor::Extensions::Treeprocessor
  def process
    process_blocks @document if @document.blocks?
  end

  def process_blocks node
    node.blocks.each_with_index do |block, i|
      if block.context == :literal && block.lines.first.start_with?('$ ')
        node.blocks[i] = convert_to_terminal_listing block
      else
        process_blocks block if block.blocks?
      end
    end
  end

  def convert_to_terminal_listing block
    attributes = block.attributes
    attributes['role'] = 'terminal'
    lines = block.lines.map do |line|
      line = block.sub_specialcharacters line.chomp
      if line.start_with? '$ '
        %(<span class="command">#{line[2..-1]}</span>)
      else
        line
      end
    end
    Asciidoctor::Block.new @document, :listing, :content_model => :verbatim, :subs => [],
        :source => lines * "\n", :attributes => attributes 
  end
end
```

.Usage

```ruby
Asciidoctor::Extensions.register do |document|
  treeprocessor TerminalCommandTreeprocessor
end

Asciidoctor.render_file 'sample-with-terminal-command.ad', :safe => :safe, :in_place => true
```

In the example below the Treeprocessor examines the block contents looking for the +// (*)+ suffix and rewrites the line so that Asciidoctor formats it appropriately.

[source,java]
----
protected void configure(HttpSecurity http) throws Exception {
    http
        .authorizeRequests()
            .antMatchers("/resources/**").permitAll() // (*)
            .anyRequest().authenticated()
            .and()
        .formLogin()
            .loginPage("/login")
            .permitAll();
----

=== Postprocessor example

Purpose::
  Insert custom footer text.

.CustomFooterPostprocessor

```ruby
class CustomFooterPostprocessor < Asciidoctor::Extensions::Postprocessor
  def process output
    content = 'Copyright Acme, Inc.'
    if @document.basebackend? 'html'
      replacement = %(<div id="footer-text">\\1<br>\n#{content}\n</div>)
      output = output.sub(/<div id="footer-text">(.*?)<\/div>/m, replacement)
    elsif @document.basebackend? 'docbook'
      replacement = %(<simpara>#{content}</simpara>\n\\1)
      output = output.sub(/(<\/(?:article|book)>)/, replacement)
    end
    output
  end 
end
```

.Usage

```
Asciidoctor::Extensions.register do |document|
  postprocessor CustomFooterPostprocessor
end

Asciidoctor.render_file 'sample.ad', :safe => :safe, :in_place => true
```

=== Block processor example

Purpose::
  Register a custom block style named +yell+ that uppercases all the words and converts periods to exclamation points.

.sample-with-yell-block.ad

```
[yell]
The time is now. Get a move on.
```

.YellBlock

```ruby
require 'asciidoctor'
require 'asciidoctor/extensions'

class YellBlock < Asciidoctor::Extensions::BlockProcessor
  option :contexts, [:paragraph]
  option :content_model, :simple

  def process parent, reader, attributes
    lines = reader.lines.map {|line| line.upcase.gsub(/\.( |$)/, '!\\1') }
    Asciidoctor::Block.new parent, :paragraph, :source => lines, :attributes => attributes
  end
end
```

.Usage

```ruby
Asciidoctor::Extensions.register do |document|
  block :yell, YellBlock
end

Asciidoctor.render_file 'sample-with-yell-block.ad', :safe => :safe, :in_place => true
```

=== Block macro processor example

Purpose::
  Create a block macro named +gist+ for embedding a gist.

.sample-with-gist-macro.ad

```
.My Gist
gist::123456[]
```

.GistMacro

```ruby
require 'asciidoctor'
require 'asciidoctor/extensions'

class GistMacro < Asciidoctor::Extensions::BlockMacroProcessor
  def process parent, target, attributes
    title = (attributes.has_key? 'title') ?
        %(\n<div class="title">#{attributes['title']}</div>) : nil
    source = %(<div class="gistblock">#{title}
<div class="content">
<script src="https://gist.github.com/#{target}.js"></script>
</div>
</div>)
    Asciidoctor::Block.new parent, :pass, :content_model => :raw, :source => source
  end
end
```

.Usage

```ruby
Asciidoctor::Extensions.register do |document|
  if document.basebackend? 'html'
    block_macro :gist, GistMacro
  end
end

Asciidoctor.render_file('sample-with-gist.ad', :safe => :safe, :in_place => true)
```

=== Inline macro processor example

Purpose:: 
  Create an inline macro named +man+ that links to a manpage.

.sample-with-man-link.ad

```
See man:gittutorial[7] to get started.
```

.ManpageMacro

```ruby
require 'asciidoctor'
require 'asciidoctor/extensions'

class ManpageMacro < Asciidoctor::Extensions::InlineMacroProcessor
  option :pos_attrs, ['volnum']

  def process parent, target, attributes
    text = manname = target
    suffix = ''
    target = "#{manname}.html"
    if (volnum = attributes.fetch('volnum', nil))
      suffix = "(#{volnum})"
    end
    @document.register(:links, target)
    %(#{Asciidoctor::Inline.new(parent, :anchor, text, :type => :link, :target => target).render}#{suffix})
  end
end
```

.Usage

```ruby
Asciidoctor::Extensions.register do |document|
  inline_macro :man, ManpageMacro
end

Asciidoctor.render_file('sample-with-man-link.ad', :safe => :safe, :in_place => true)
```

=== Include processor example

Purpose::
  Include a file from a URI.

.sample-with-uri-include.ad

```
:source-highlighter: coderay

.Gemfile
[source,ruby]
----
\include::https://raw.github.com/asciidoctor/asciidoctor/master/Gemfile[]
----
```

.UriIncludeProcessor

```ruby
require 'asciidoctor'
require 'asciidoctor/extensions'
require 'uri-open'

class UriIncludeProcessor < Asciidoctor::Extensions::IncludeProcessor
  def handles? target
    target.start_with?('http://') or target.start_with?('https://')
  end

  def process reader, target, attributes
    content = open(target).readlines
    reader.push_include content, target, target, 1, attributes
  end
end
```

.Usage

```ruby
Asciidoctor::Extensions.register do |document|
  include_processor UriIncludeProcessor
end

Asciidoctor.render_file('sample-with-uri-include.ad', :safe => :safe, :in_place => true)
```

= Build Integrations and Implementations

NOTE: Section pending

== Java

NOTE: Section pending

== Gradle

NOTE: Section pending

== Maven

NOTE: Section pending

== JavaDoc

NOTE: Section pending

== JavaScript

NOTE: Section pending

== Yard

NOTE: Section pending

== Rdoc

NOTE: Section pending

= Conversions and Migrations

NOTE: Section pending

== Convert Markdown *to* Asciidoctor

NOTE: Section pending

== Migrate from AsciiDoc to Asciidoctor

NOTE: Section pending

= Conclusion

NOTE: Section pending

= Resources

NOTE: Section pending

== Copyright and License

Copyright (C) 2012-2013 Dan Allen and Ryan Waldron. 
Free use of this software is granted under the terms of the MIT License.

See the {license}[LICENSE] file for details.

== Authors

*Asciidoctor* was written by {mojavelinux}[Dan Allen], {erebor}[Ryan Waldron], {lightguard}[Jason Porter], {nickh}[Nick Hengeveld] and {contributors}[other contributors].

The initial code from which Asciidoctor emerged was written by {nickh}[Nick Hengeveld] to process the git man pages for the {gitscm-next}[Git project site]. 
Refer to the commit history of {seed-contribution}[asciidoc.rb] to view the initial contributions.

*AsciiDoc* was written by Stuart Rackham and has received contributions from many other individuals.

// TODO fill in this section and enable
//== Thanks, acknowledgments, and credits

== FAQ

NOTE: Section pending

== Additional Help

NOTE: Section pending

[glossary]
== Glossary

[glossary]
admonition paragraph:: a callout paragraph that has a label or icon indicating its priority
admonition block:: a callout block containing complex content that has a label or icon indicating its priority
backend:: a set of templates for converting AsciiDoc source to different output format
cross reference:: a link from one location in the document to another location marked by an anchor
list continuation:: a plus sign (`+`) on a line by itself that connects adjacent lines of text to a list item
quoted text:: text which is enclosed in special punctuation to give it emphasis or special meaning

NOTE: Section expansion pending

:leveloffset: 1
[[asciidoctor-vs-asciidoc]]
[appendix]
include::asciidoc-asciidoctor-diffs-table.adoc[]

:leveloffset: 1
[[char-ref-table]]
[appendix]
include::character-ref-attributes.adoc[]

////

Include license and copyright

== Index

NOTE: Section pending

////

